(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[69],{"4G1w":function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),l=n.n(a),r=(n("B2uJ"),n("+su7"),n("qOys")),c=n.n(r);n("5Yjd");t["default"]=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"markdown"},l.a.createElement("h2",{id:"\u6444\u50cf\u5934\u8bbf\u95ee"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u6444\u50cf\u5934\u8bbf\u95ee"},l.a.createElement("span",{className:"icon icon-link"})),"\u6444\u50cf\u5934\u8bbf\u95ee"),l.a.createElement("p",null,"HTML5 \u7684 ",l.a.createElement("code",null,"getUserMedia")," API \u63d0\u4f9b\u4e86\u8bbf\u95ee\u7528\u6237\u5a92\u4f53\u8bbe\u5907\u7684\u80fd\u529b\uff0c\u57fa\u4e8e\u8be5\u7279\u6027\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u4e0d\u4f9d\u8d56\u4efb\u4f55\u6d4f\u89c8\u5668\u63d2\u4ef6\u7684\u6761\u4ef6\u4e0b\u8bbf\u95ee\u89c6\u9891\u548c\u97f3\u9891\u7b49\u8bbe\u5907\u3002"),l.a.createElement("h3",{id:"getusermedia-api"},l.a.createElement("a",{"aria-hidden":"true",href:"#getusermedia-api"},l.a.createElement("span",{className:"icon icon-link"})),"getUserMedia API"),l.a.createElement("p",null,"\u5404\u4e3b\u8981\u6d4f\u89c8\u5668\u5bf9 ",l.a.createElement("code",null,"getUserMedia")," API \u7684\u652f\u6301\u60c5\u51b5\u3002"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u6d4f\u89c8\u5668"),l.a.createElement("th",null,"\u7248\u672c\uff08\u65e7\u7248 API\uff09"),l.a.createElement("th",null,"\u7248\u672c\uff08\u65b0\u7248 API\uff09"),l.a.createElement("th",null,"\u8bf4\u660e"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"IE"),l.a.createElement("td",null,"\u4e0d\u652f\u6301"),l.a.createElement("td",null,"\u4e0d\u652f\u6301"),l.a.createElement("td",null)),l.a.createElement("tr",null,l.a.createElement("td",null,"Edge"),l.a.createElement("td",null,"12+"),l.a.createElement("td",null,"\u4e0d\u652f\u6301"),l.a.createElement("td",null)),l.a.createElement("tr",null,l.a.createElement("td",null,"Firefox"),l.a.createElement("td",null,"17+"),l.a.createElement("td",null,"36+"),l.a.createElement("td",null,"\u9700\u8981\u524d\u7f00 ",l.a.createElement("code",null,"moz"))),l.a.createElement("tr",null,l.a.createElement("td",null,"Chrome"),l.a.createElement("td",null,"21+"),l.a.createElement("td",null,"47+"),l.a.createElement("td",null,"\u90e8\u5206\u652f\u6301\uff0c\u9700\u8981\u524d\u7f00 ",l.a.createElement("code",null,"webkit"))),l.a.createElement("tr",null,l.a.createElement("td",null,"Safari"),l.a.createElement("td",null,"\u4e0d\u652f\u6301"),l.a.createElement("td",null,"\u4e0d\u652f\u6301"),l.a.createElement("td",null)),l.a.createElement("tr",null,l.a.createElement("td",null,"iOS Safari"),l.a.createElement("td",null,"\u4e0d\u652f\u6301"),l.a.createElement("td",null,"\u4e0d\u652f\u6301"),l.a.createElement("td",null)),l.a.createElement("tr",null,l.a.createElement("td",null,"Android Browser"),l.a.createElement("td",null,"56+"),l.a.createElement("td",null,"\u4e0d\u652f\u6301"),l.a.createElement("td",null,"\u90e8\u5206\u652f\u6301\uff0c\u9700\u8981\u524d\u7f00 ",l.a.createElement("code",null,"webkit"))),l.a.createElement("tr",null,l.a.createElement("td",null,"Chrome for Android"),l.a.createElement("td",null,"57+"),l.a.createElement("td",null,"\u4e0d\u652f\u6301"),l.a.createElement("td",null,"\u90e8\u5206\u652f\u6301\uff0c\u9700\u8981\u524d\u7f00 ",l.a.createElement("code",null,"webkit"))),l.a.createElement("tr",null,l.a.createElement("td",null,"UC Browser for Android"),l.a.createElement("td",null,"11.4+"),l.a.createElement("td",null,"\u4e0d\u652f\u6301"),l.a.createElement("td",null,"\u90e8\u5206\u652f\u6301\uff0c\u9700\u8981\u524d\u7f00 ",l.a.createElement("code",null,"webkit"))))),l.a.createElement("p",null,"\u65e7\u7248\u8bed\u6cd5"),l.a.createElement(c.a,{code:"getUserMedia(constraints, successCallback, errorCallback);\n",lang:"js"}),l.a.createElement("p",null,"\u65b0\u7248\u8bed\u6cd5"),l.a.createElement(c.a,{code:"getUserMedia(constraints)\n  .then(successCallback)\n  .catch(errorCallback);\n",lang:"js"}),l.a.createElement("p",null,"\u53c2\u6570 ",l.a.createElement("code",null,"constraints")," \u6307\u5b9a\u8bf7\u6c42\u7684\u5a92\u4f53\u7c7b\u578b\uff0c\u4e3b\u8981\u5305\u542b video \u548c audio\u3002"),l.a.createElement(c.a,{code:"// \u8bf7\u6c42\u4e0d\u5e26\u4efb\u4f55\u53c2\u6570\u7684\u89c6\u9891\u548c\u97f3\u9891\n{video: true, audio: true}\n\n// \u53ef\u6307\u5b9a\u89c6\u9891\u5206\u8fa8\u7387\n{video: true, audio: true}\n\n// \u79fb\u52a8\u8bbe\u5907\u4e0a\uff0c\u53ef\u6307\u5b9a\u4f7f\u7528\u524d\u7f6e\u6444\u50cf\u5934\n{video: { facingMode: 'user' } }\n\n// \u4f7f\u7528\u540e\u7f6e\u6444\u50cf\u5934\n{video: { facingMode: { exact: 'environment'} } }\n",lang:"js"}),l.a.createElement("ul",null,l.a.createElement("li",null,"\u6210\u529f\u56de\u8c03\u51fd\u6570 ",l.a.createElement("code",null,"successCallback")," \u7684\u53c2\u6570 stream\uff0c\u4e3a MediaStream \u5bf9\u8c61\uff0c\u8868\u793a\u5a92\u4f53\u5185\u5bb9\u7684\u6570\u636e\u6d41\uff0c\u53ef\u4ee5\u901a\u8fc7 ",l.a.createElement("code",null,"URL.createObjectURL")," \u8f6c\u6362\u540e\u8bbe\u7f6e\u4e3a Video \u6216 Audio \u5143\u7d20\u7684 ",l.a.createElement("code",null,"src")," \u5c5e\u6027\u6765\u4f7f\u7528\uff0c\u90e8\u5206\u8f83\u65b0\u7684\u6d4f\u89c8\u5668\u4e5f\u53ef\u4ee5\u76f4\u63a5\u8bbe\u7f6e\u4e3a ",l.a.createElement("code",null,"srcObject")," \u5c5e\u6027\u6765\u4f7f\u7528\u3002"),l.a.createElement("li",null,"\u5931\u8d25\u56de\u8c03\u51fd\u6570 ",l.a.createElement("code",null,"errorCallback")," \u7684\u53c2\u6570 ",l.a.createElement("code",null,"error"),"\uff0c\u5176\u4e2d ",l.a.createElement("code",null,"name")," \u5c5e\u6027\u7684\u503c\u53c2\u8003\u4e0b\u8868\u3002")),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"\u9519\u8bef\u503c"),l.a.createElement("th",null,"\u9519\u8bef\u540d\u79f0"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"AbortError"),l.a.createElement("td",null,"\u4e2d\u6b62\u9519\u8bef")),l.a.createElement("tr",null,l.a.createElement("td",null,"NotAllowedError"),l.a.createElement("td",null,"\u62d2\u7edd\u9519\u8bef")),l.a.createElement("tr",null,l.a.createElement("td",null,"NotFoundError"),l.a.createElement("td",null,"\u627e\u4e0d\u5230\u9519\u8bef")),l.a.createElement("tr",null,l.a.createElement("td",null,"NotReadableError"),l.a.createElement("td",null,"\u65e0\u6cd5\u8bfb\u53d6\u9519\u8bef")),l.a.createElement("tr",null,l.a.createElement("td",null,"OverConstrainedError"),l.a.createElement("td",null,"\u65e0\u6cd5\u6ee1\u8db3\u8981\u6c42\u9519\u8bef")),l.a.createElement("tr",null,l.a.createElement("td",null,"SecurityError"),l.a.createElement("td",null,"\u5b89\u5168\u9519\u8bef")),l.a.createElement("tr",null,l.a.createElement("td",null,"TypeError"),l.a.createElement("td",null,"\u7c7b\u578b\u9519\u8bef")))),l.a.createElement("p",null,"\u5b9e\u4f8b\u4ee3\u7801\uff1a"),l.a.createElement(c.a,{code:"navigator.mediaDevices\n  .getUseMedia({ video: true })\n  .then(function(stream) {\n    // \u6210\u529f\u83b7\u5f97\u5a92\u4f53\u6d41\n  })\n  .catch(function(error) {\n    console.log('\u83b7\u53d6\u7528\u6237\u5a92\u4f53\u5931\u8d25:' + error.name);\n  });\n",lang:"js"}),l.a.createElement("p",null,"\u521d\u6b21\u8bbf\u95ee\u7528\u6237\u5a92\u4f53\u8bbe\u5907\u65f6\uff0c\u6d4f\u89c8\u5668\u4f1a\u8be2\u95ee\u7528\u6237\u662f\u5426\u5141\u8bb8\u8bbf\u95ee\uff0c\u5728\u7528\u6237\u5141\u8bb8\u540e\u83b7\u5f97\u8bbf\u95ee\u5a92\u4f53\u8bbe\u5907\u6388\u6743\u3002"),l.a.createElement("h3",{id:"\u8c03\u7528\u6444\u50cf\u5934\u62cd\u7167\u5b9e\u4f8b"},l.a.createElement("a",{"aria-hidden":"true",href:"#\u8c03\u7528\u6444\u50cf\u5934\u62cd\u7167\u5b9e\u4f8b"},l.a.createElement("span",{className:"icon icon-link"})),"\u8c03\u7528\u6444\u50cf\u5934\u62cd\u7167\u5b9e\u4f8b"),l.a.createElement("p",null,"\u672c\u4f8b\u5b50\u4e2d\uff0c\u5c06\u8bf7\u6c42\u8bbf\u95ee\u7528\u6237\u6444\u50cf\u5934\uff0c\u5e76\u628a\u89c6\u9891\u6d41\u901a\u8fc7 Video \u5143\u7d20\u663e\u793a\u51fa\u6765\u3002"),l.a.createElement(c.a,{code:'\x3c!-- video\u7528\u4e8e\u663e\u793a\u5a92\u4f53\u8bbe\u5907\u7684\u89c6\u9891\u6d41,\u81ea\u52a8\u64ad\u653e --\x3e\n<video id="video" autoplay style="width:480px;height:320px"></video>\n<div>\n  <button id="capture">\u62cd\u7167</button>\n  \x3c!-- \u62cd\u7167\u6309\u94ae--\x3e\n</div>\n<canvas id="canvas" width="480" height="320"></canvas>\n\x3c!-- \u63cf\u7ed8video\u622a\u56fe --\x3e\n',lang:"html"}),l.a.createElement(c.a,{code:"// \u8bbf\u95ee\u7528\u6237\u5a92\u4f53\u8bbe\u5907\u7684\u517c\u5bb9\u65b9\u6cd5\nfunction getUserMedia(constraints, success, error) {\n  if (navigator.mediaDevice.getUserMedia) {\n    // \u6700\u65b0\u7684\u6807\u51c6API\n    navigator.mediaDevice\n      .getUserMedia(constraints)\n      .then(success)\n      .catch(error);\n  } else if (navigator.webkitGetUserMedia) {\n    // Webkit \u6838\u5fc3\u6d4f\u89c8\u5668\n    navigator.webkitGetUserMedia(constraints, success, error);\n  } else if (navigator.mozGetUserMedia) {\n    // Firefox \u6d4f\u89c8\u5668\n    navigator.mozGetUserMedia(constraints, success, error);\n  } else if (navigator.getUserMedia) {\n    // \u65e7\u7248 API\n    navigator.getUserMedia(constraints, success, error);\n  }\n}\n\nconst video = document.getElementById('video');\nconst canvas = document.getElementById('canvas');\nconst context = canvas.getContext('2D');\n\n// \u6210\u529f\u7684\u56de\u8c03\u51fd\u6570\nfunction success(stream) {\n  // \u517c\u5bb9\u7684webkit\u6838\u5fc3\u6d4f\u89c8\u5668\n  const compatobleURL = window.URL || window.webkitURL;\n  // \u5c06\u89c6\u9891\u6d41\u8bbe\u7f6e\u4e3avideo\u5143\u7d20\u7684\u6e90\n  video.src = compatibleURL.createObjectURL(stream);\n  video.play(); // \u64ad\u653e\u89c6\u9891\n}\n\n// \u5f02\u5e38\u7684\u56de\u8c03\u51fd\u6570\nfunction error(error) {\n  console.log('\u8bbf\u95ee\u7528\u6237\u5a92\u4f53\u8bbe\u5907\u5931\u8d25:', error.name, error.message);\n}\n\nif (\n  navigator.mediaDevices.getUserMedia ||\n  navigator.getUserMedia ||\n  navigator.webkitGetUserMedia ||\n  navigator.mozGetUserMedia\n) {\n  // \u8c03\u7528\u7528\u6237\u5a92\u4f53\u8bbe\u5907\uff0c\u8bbf\u95ee\u6444\u50cf\u5934\n  getUserMedia({ video: { width: 480, height: 320 } }, success, error);\n} else {\n  alert('\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8bbf\u95ee\u7528\u6237\u5a92\u4f53\u8bbe\u5907\uff01');\n}\n\n// \u7ed1\u5b9a\u62cd\u7167\u6309\u94ae\u7684\u5355\u51fb\u4e8b\u4ef6\ndocument.getElementById('capture').addEventListener('click', function() {\n  context.drawImage(video, 0, 0, 480, 320); // \u5c06video\u753b\u9762\u5728canvas\u4e0a\u7ed8\u5236\u51fa\u6765\n});\n",lang:"js"})))}}}]);