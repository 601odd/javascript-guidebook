<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/javascript-guidebook/umi.b538b811.css" />
    <script>
      window.routerBase = "/javascript-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.7
    </script>
    <title>&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x7A0B;&#x5E8F;</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/javascript-guidebook-favicon.png&#x27;)" href="/javascript-guidebook//">JavaScript Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/javascript-guidebook//basic-concept">基本语法</a><a href="/javascript-guidebook//standard-built-in-objects">内置对象</a><a href="/javascript-guidebook//core-modules">核心模块</a><a href="/javascript-guidebook//object-oriented-programming">OOP</a><a href="/javascript-guidebook//browser-object-model">BOM</a><a aria-current="page" class="active" href="/javascript-guidebook//document-object-model">DOM</a><a href="/javascript-guidebook//computer-networks">计算机网络</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/javascript-guidebook-favicon.png&#x27;)" href="/javascript-guidebook//"></a><h1>JavaScript Guidebook</h1><p>JavaScript 完全知识体系</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/javascript-guidebook//basic-concept">基本语法</a></li><li><a href="/javascript-guidebook//standard-built-in-objects">内置对象</a></li><li><a href="/javascript-guidebook//core-modules">核心模块</a></li><li><a href="/javascript-guidebook//object-oriented-programming">OOP</a></li><li><a href="/javascript-guidebook//browser-object-model">BOM</a></li><li><a aria-current="page" class="active" href="/javascript-guidebook//document-object-model">DOM</a></li><li><a href="/javascript-guidebook//computer-networks">计算机网络</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/javascript-guidebook//document-object-model">DOM 文档对象模型</a></li><li><a href="/javascript-guidebook//document-object-model/dom">文档对象模型</a><ul><li><a href="/javascript-guidebook//document-object-model/dom/dom"><span>文档对象模型</span></a></li><li><a href="/javascript-guidebook//document-object-model/dom/hierarchy-of-nodes"><span>节点层次</span></a></li></ul></li><li><a href="/javascript-guidebook//document-object-model/event-target">EventTarget</a></li><li><a href="/javascript-guidebook//document-object-model/node">Node</a><ul><li><a href="/javascript-guidebook//document-object-model/node/node"><span>Node</span></a></li><li><a href="/javascript-guidebook//document-object-model/node/node-properties"><span>节点属性</span></a></li><li><a href="/javascript-guidebook//document-object-model/node/node-relationships"><span>节点关系</span></a></li><li><a href="/javascript-guidebook//document-object-model/node/node-manipulation"><span>节点操作</span></a></li></ul></li><li><a href="/javascript-guidebook//document-object-model/document">Document</a><ul><li><a href="/javascript-guidebook//document-object-model/document/document"><span>Document</span></a></li><li><a href="/javascript-guidebook//document-object-model/document/document-properties"><span>文档属性</span></a></li><li><a href="/javascript-guidebook//document-object-model/document/document-node-creation"><span>文档节点创建</span></a></li><li><a href="/javascript-guidebook//document-object-model/document/document-element-access"><span>文档元素访问</span></a></li><li><a href="/javascript-guidebook//document-object-model/document/document-methods"><span>文档方法</span></a></li></ul></li><li><a href="/javascript-guidebook//document-object-model/element">Element</a><ul><li><a href="/javascript-guidebook//document-object-model/element/element"><span>Element</span></a></li><li><a href="/javascript-guidebook//document-object-model/element/element-traversal"><span>元素遍历</span></a></li><li><a href="/javascript-guidebook//document-object-model/element/dynamic-collection"><span>动态集合</span></a></li><li><a href="/javascript-guidebook//document-object-model/element/accessing-element-styles"><span>查询样式</span></a></li><li><a href="/javascript-guidebook//document-object-model/element/working-with-style-sheets"><span>设置样式</span></a></li><li><a href="/javascript-guidebook//document-object-model/element/element-matches"><span>Element.matches</span></a></li></ul></li><li><a aria-current="page" class="active" href="/javascript-guidebook//document-object-model/events">DOM 事件流</a><ul><li><a href="/javascript-guidebook//document-object-model/events/event-flow"><span>事件流</span></a></li><li><a aria-current="page" class="active" href="/javascript-guidebook//document-object-model/events/event-handlers-or-listener"><span>事件处理程序</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/the-event-object"><span>事件对象</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-delegation"><span>事件委托</span></a></li></ul></li><li><a href="/javascript-guidebook//document-object-model/events/event-types">事件类型</a><ul><li><a href="/javascript-guidebook//document-object-model/events/event-types/event-types"><span>事件类型</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/ui-events"><span>用户界面事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/the-mouse-and-dom-mouse-scroll-events"><span>鼠标与滚轮事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/the-keyboard-and-text-events"><span>键盘与文本事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/the-orientationchange-event"><span>设备事件</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="事件处理程序" data-depth="2" class=""><a href="/javascript-guidebook//document-object-model/events/event-handlers-or-listener#事件处理程序"><span>事件处理程序</span></a></li><li title="HTML事件处理程序" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/events/event-handlers-or-listener#html事件处理程序"><span>HTML事件处理程序</span></a></li><li title="DOM0级事件处理程序" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/events/event-handlers-or-listener#dom0级事件处理程序"><span>DOM0级事件处理程序</span></a></li><li title="DOM2级事件处理程序" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/events/event-handlers-or-listener#dom2级事件处理程序"><span>DOM2级事件处理程序</span></a></li><li title="IE事件处理程序" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/events/event-handlers-or-listener#ie事件处理程序"><span>IE事件处理程序</span></a></li><li title="跨浏览器的事件处理程序" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/events/event-handlers-or-listener#跨浏览器的事件处理程序"><span>跨浏览器的事件处理程序</span></a></li><li title="总结" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/events/event-handlers-or-listener#总结"><span>总结</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h2 id="事件处理程序"><a aria-hidden="true" href="#事件处理程序"><span class="icon icon-link"></span></a>事件处理程序</h2><p>事件就是用户或浏览器自身执行的某种动作。诸如 click、load和mouseover，都是事件的名字。而响应某个事件的函数就叫做<strong>事件处理程序（或事件侦听器）</strong>。事件处理程序的名字以“on”开头，因此click事件的事件处理程序就是onclick，load事件的事件处理程序就是onload。为事件指定处理程序的方式有好几种</p><ul><li>HTML事件处理程序</li><li>DOM0级事件处理程序</li><li>DOM2级事件处理程序</li><li>IE事件处理程序</li><li>跨浏览器的事件处理程序</li></ul><h3 id="html事件处理程序"><a aria-hidden="true" href="#html事件处理程序"><span class="icon icon-link"></span></a>HTML事件处理程序</h3><p>某个元素支持的每种事件，都可以使用一个与相应事件处理程序同名的 HTML 特性来指定。这个特性的值应该是能够执行的 Javascript 代码。</p><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="&lt;div onclick=&quot;alert(event.type)&quot;&gt;&lt;/div&gt;
" data-status="copy"></button><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">div</span><span class="token tag"> </span><span class="token tag attr-name">onclick</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">alert(event.type)</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token tag punctuation">&lt;/</span><span class="token tag">div</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>在事件处理程序函数内部，<code>this</code> 值等于事件的目标元素。</p><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="&lt;div id=&quot;box&quot; onclick=&quot;this.innerHTML+= &#x27;1&#x27;;&quot;&gt;&lt;/div&gt;
" data-status="copy"></button><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">div</span><span class="token tag"> </span><span class="token tag attr-name">id</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">box</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag attr-name">onclick</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">this.innerHTML+= &#x27;1&#x27;;</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token tag punctuation">&lt;/</span><span class="token tag">div</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="dom0级事件处理程序"><a aria-hidden="true" href="#dom0级事件处理程序"><span class="icon icon-link"></span></a>DOM0级事件处理程序</h3><p>通过 Javascript 指定事件处理程序的传统方式，就是将一个函数赋值给一个事件处理程序属性。这种为事件处理程序赋值的方法是在第四代Web浏览器中出现的，而且至今仍然为所有现代浏览器所支持。</p><p>每个元素都有自己的事件处理程序属性，这些属性通常全部小写，将这种属性的值设置为一个函数，就可以指定事件处理程序。</p><p>以DOM0级方式添加的事件处理程序会在<strong>事件流的冒泡阶段</strong>被处理。</p><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="&lt;div id=&quot;box&quot;&gt;&lt;/div&gt;
" data-status="copy"></button><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">div</span><span class="token tag"> </span><span class="token tag attr-name">id</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">box</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token tag punctuation">&lt;/</span><span class="token tag">div</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const box = document.querySelector(&quot;#box&quot;);
box.onclick = function(){
    this.innerHTML += &quot;1&quot;;
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> box </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">box</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onclick</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span><span class="token plain"> </span><span class="token operator">+=</span><span class="token plain"> </span><span class="token string">&quot;1&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><strong>删除事件处理程序</strong>：可以通过将事件处理程序属性设置为 <code>null</code> 来删除事件处理程序。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="box.onclick = null;
" data-status="copy"></button><div class="token-line"><span class="token plain">box</span><span class="token punctuation">.</span><span class="token property-access">onclick</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><strong>缺点</strong>：DOM0级事件处理程序的缺点是围绕着每个事件目标对于每种事件类型只能添加一个事件处理程序</p><h3 id="dom2级事件处理程序"><a aria-hidden="true" href="#dom2级事件处理程序"><span class="icon icon-link"></span></a>DOM2级事件处理程序</h3><p>DOM2级事件处理程序属于W3C标准模型，现代浏览器（除IE6-8之外的浏览器）都支持该模型。在该事件模型中，一次事件共有三个过程：</p><ul><li>事件捕获阶段：事件从文档节点一直向下传播到目标元素，依次检查经过的节点是否绑定了事件监听函数，如果有则执行</li><li>事件处理阶段：事件到达目标元素，触发目标元素的监听函数。</li><li>事件冒泡阶段：事件从目标元素冒泡到文档节点，依次检查经过的节点是否绑定了事件监听函数，如果有则执行。</li></ul><p>DOM2级事件处理程序定义了两个方法用于处理指定和删除事件处理程序的操作：</p><p><strong>绑定方式</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="element.addEventListener(eventType, handler, useCapture)
" data-status="copy"></button><div class="token-line"><span class="token plain">element</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token plain">eventType</span><span class="token punctuation">,</span><span class="token plain"> handler</span><span class="token punctuation">,</span><span class="token plain"> useCapture</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><strong>移除方式</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="element.removeEventListener(eventType, handler, useCapture)
" data-status="copy"></button><div class="token-line"><span class="token plain">element</span><span class="token punctuation">.</span><span class="token method function property-access">removeEventListener</span><span class="token punctuation">(</span><span class="token plain">eventType</span><span class="token punctuation">,</span><span class="token plain"> handler</span><span class="token punctuation">,</span><span class="token plain"> useCapture</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>所有DOM节点中都包含这两个方法，并且它们都接受3个参数：要处理的事件名、作为事件处理程序的函数和一个布尔值。最后的布尔值参数如果是 <code>true</code>，表示在捕获阶段调用事件处理程序；如果是 <code>false</code>，表示在冒泡阶段调用事件处理程序。若最后的布尔值不填写，则和 <code>false</code> 效果一样。</p><h4 id="参数传递"><a aria-hidden="true" href="#参数传递"><span class="icon icon-link"></span></a>参数传递</h4><p>如果希望向监听函数传递参数，可以用匿名函数包装一下监听函数</p><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="&lt;div id=&quot;box&quot; style=&quot;height:30px;width:200px;background-color:pink;&quot;&gt;&lt;/div&gt;
&lt;script dangerouslySetInnerHTML={{ __html: `
box.addEventListener(&quot;click&quot;,function(){
    test(&#x27;123&#x27;);
},false);
function test(x){box.innerHTML += x;}
` }} /&gt;
" data-status="copy"></button><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">div</span><span class="token tag"> </span><span class="token tag attr-name">id</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">box</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag style-attr language-css attr-name"> </span><span class="token tag style-attr language-css attr-name">style</span><span class="token tag style-attr language-css punctuation">=&quot;</span><span class="token tag style-attr language-css attr-value property">height</span><span class="token tag style-attr language-css attr-value punctuation">:</span><span class="token tag style-attr language-css attr-value number">30</span><span class="token tag style-attr language-css attr-value unit">px</span><span class="token tag style-attr language-css attr-value punctuation">;</span><span class="token tag style-attr language-css attr-value property">width</span><span class="token tag style-attr language-css attr-value punctuation">:</span><span class="token tag style-attr language-css attr-value number">200</span><span class="token tag style-attr language-css attr-value unit">px</span><span class="token tag style-attr language-css attr-value punctuation">;</span><span class="token tag style-attr language-css attr-value property">background-color</span><span class="token tag style-attr language-css attr-value punctuation">:</span><span class="token tag style-attr language-css attr-value">pink</span><span class="token tag style-attr language-css attr-value punctuation">;</span><span class="token tag style-attr language-css punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token tag punctuation">&lt;/</span><span class="token tag">div</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;</span><span class="token tag">script</span><span class="token tag"> </span><span class="token tag attr-name">dangerouslySetInnerHTML</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value">{{</span><span class="token tag"> </span><span class="token tag attr-name namespace">__html:</span><span class="token tag"> </span><span class="token tag attr-name">`</span><span class="token tag"></span></div><div class="token-line"><span class="token tag"></span><span class="token tag attr-name">box.addEventListener(&quot;click&quot;,function(){</span><span class="token tag"></span></div><div class="token-line"><span class="token tag">    </span><span class="token tag attr-name">test(&#x27;123&#x27;);</span><span class="token tag"></span></div><div class="token-line"><span class="token tag"></span><span class="token tag attr-name">},false);</span><span class="token tag"></span></div><div class="token-line"><span class="token tag"></span><span class="token tag attr-name">function</span><span class="token tag"> </span><span class="token tag attr-name">test(x){box.innerHTML</span><span class="token tag"> </span><span class="token tag attr-name">+</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value"> x;}</span><span class="token tag"></span></div><div class="token-line"><span class="token tag"></span><span class="token tag attr-name">`</span><span class="token tag"> </span><span class="token tag attr-name">}}</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="注销事件绑定"><a aria-hidden="true" href="#注销事件绑定"><span class="icon icon-link"></span></a>注销事件绑定</h4><p>通过 <code>addEventListener()</code> 添加的事件处理程序只能使用 <code>removeEventListener()</code> 来移除。</p><ul><li>移除时传入的参数与添加处理程序时使用的参数相同</li><li><code>addEventListener()</code> 添加的匿名函数将无法移除</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="&lt;div id=&quot;box&quot;&gt;&lt;/div&gt;
" data-status="copy"></button><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">div</span><span class="token tag"> </span><span class="token tag attr-name">id</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">box</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token tag punctuation">&lt;/</span><span class="token tag">div</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>以下无效：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="box.addEventListener(&quot;click&quot;,function(){
    this.innerHTML += &#x27;1&#x27;
},false);

box.removeEventListener(&#x27;click&#x27;,function(){
    this.innerHTML += &#x27;1&#x27;
},false);
" data-status="copy"></button><div class="token-line"><span class="token plain">box</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span><span class="token plain"> </span><span class="token operator">+=</span><span class="token plain"> </span><span class="token string">&#x27;1&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">box</span><span class="token punctuation">.</span><span class="token method function property-access">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;click&#x27;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span><span class="token plain"> </span><span class="token operator">+=</span><span class="token plain"> </span><span class="token string">&#x27;1&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>以下有效：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const handle = function(){this.innerHTML += &#x27;1&#x27;};

box.addEventListener(&quot;click&quot;, handle, false);
box.removeEventListener(&#x27;click&#x27;, handle, false);
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function">handle</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span><span class="token plain"> </span><span class="token operator">+=</span><span class="token plain"> </span><span class="token string">&#x27;1&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">box</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span><span class="token plain"> handle</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">box</span><span class="token punctuation">.</span><span class="token method function property-access">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;click&#x27;</span><span class="token punctuation">,</span><span class="token plain"> handle</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="ie事件处理程序"><a aria-hidden="true" href="#ie事件处理程序"><span class="icon icon-link"></span></a>IE事件处理程序</h3><p>IE 事件模型共有两个过程：</p><ul><li>事件处理阶段：事件到达目标元素，触发目标元素的监听函数。</li><li>事件冒泡阶段：事件从目标元素冒泡到文档节点，依次检查经过的节点是否绑定了事件监听函数，如果有则执行。</li></ul><p>事件绑定：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="attachEvent(eventType, handler);
" data-status="copy"></button><div class="token-line"><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token plain">eventType</span><span class="token punctuation">,</span><span class="token plain"> handler</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>事件移除：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="detachEvent(evnetType, handler);
" data-status="copy"></button><div class="token-line"><span class="token function">detachEvent</span><span class="token punctuation">(</span><span class="token plain">evnetType</span><span class="token punctuation">,</span><span class="token plain"> handler</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>参数说明：</p><ul><li>eventType：指定事件类型</li><li>handler：事件处理函数</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// Example
cont btn = document.getElmentById(&#x27;.btn&#x27;);
btn.attachEvent(&#x27;onclick&#x27;, showMessage);
btn.detachEvent(&#x27;onclick&#x27;, showMessage);
" data-status="copy"></button><div class="token-line"><span class="token comment">// Example</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">cont btn </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElmentById</span><span class="token punctuation">(</span><span class="token string">&#x27;.btn&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">btn</span><span class="token punctuation">.</span><span class="token method function property-access">attachEvent</span><span class="token punctuation">(</span><span class="token string">&#x27;onclick&#x27;</span><span class="token punctuation">,</span><span class="token plain"> showMessage</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">btn</span><span class="token punctuation">.</span><span class="token method function property-access">detachEvent</span><span class="token punctuation">(</span><span class="token string">&#x27;onclick&#x27;</span><span class="token punctuation">,</span><span class="token plain"> showMessage</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="跨浏览器的事件处理程序"><a aria-hidden="true" href="#跨浏览器的事件处理程序"><span class="icon icon-link"></span></a>跨浏览器的事件处理程序</h3><p>为了以跨浏览器的方式处理事件，不少开发人员会使用能够隔离浏览器差异的JavaScript库，还有一些开发人员会自己开发最合适的事件处理的方法。自己编写代码其实也不难，只要恰当地使用能力检测即可。要保证处理事件的代码能在大多数浏览器下一致运行，只需关注冒泡阶段。</p><p><code>EventUtil</code> 的用法如下所示</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="var EventUtil = {
    addHandler: function(element, type, handler){
    if (element,.addEventListener) {
        element.addEventListener(type, handler, false);
    } else if (element.attachEvent) {
        element.attachEvent(&#x27;on&#x27; + type, handler);
    } else {
        element[&quot;on&quot; + type] = handler;
    }
    removeHandler: function(element, type, handler) {
        if (element.removeEventListener) {
            element.removeEventListener(type, handler, false);
        } else if (element.detachEvent) {
            element.detachEvent(&quot;on&quot; + type, handler);
        } else {
            element[&quot;on&quot; + type] = handler;
        } else {
            element[&quot;on&quot; + type] = null;
        }
    }
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">var</span><span class="token plain"> </span><span class="token maybe-class-name">EventUtil</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function-variable function">addHandler</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token parameter punctuation">,</span><span class="token parameter"> type</span><span class="token parameter punctuation">,</span><span class="token parameter"> handler</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">element</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token property-access">addEventListener</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        element</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token plain">type</span><span class="token punctuation">,</span><span class="token plain"> handler</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">else</span><span class="token plain"> </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">element</span><span class="token punctuation">.</span><span class="token property-access">attachEvent</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        element</span><span class="token punctuation">.</span><span class="token method function property-access">attachEvent</span><span class="token punctuation">(</span><span class="token string">&#x27;on&#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> type</span><span class="token punctuation">,</span><span class="token plain"> handler</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">else</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        element</span><span class="token punctuation">[</span><span class="token string">&quot;on&quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> type</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> handler</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function-variable function">removeHandler</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token parameter punctuation">,</span><span class="token parameter"> type</span><span class="token parameter punctuation">,</span><span class="token parameter"> handler</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">element</span><span class="token punctuation">.</span><span class="token property-access">removeEventListener</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            element</span><span class="token punctuation">.</span><span class="token method function property-access">removeEventListener</span><span class="token punctuation">(</span><span class="token plain">type</span><span class="token punctuation">,</span><span class="token plain"> handler</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">else</span><span class="token plain"> </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">element</span><span class="token punctuation">.</span><span class="token property-access">detachEvent</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            element</span><span class="token punctuation">.</span><span class="token method function property-access">detachEvent</span><span class="token punctuation">(</span><span class="token string">&quot;on&quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> type</span><span class="token punctuation">,</span><span class="token plain"> handler</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">else</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            element</span><span class="token punctuation">[</span><span class="token string">&quot;on&quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> type</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> handler</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">else</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            element</span><span class="token punctuation">[</span><span class="token string">&quot;on&quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> type</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="总结"><a aria-hidden="true" href="#总结"><span class="icon icon-link"></span></a>总结</h3><ul><li>HTML事件处理程序：用户可能在元素刚出现就触发了事件，但此时JS代码可能还未加载完毕。其次，HTML 代码和 JavaScript 代码紧密耦合，不利于开发和维护，所以不推荐使用这种方法。</li><li>DOM0级事件处理程序：简单且兼容性好，但是在需要对一个元素设置多个事件处理程序时便显得孱弱。</li><li>DOM2级事件处理程序：可以轻易的设置多个事件处理程序，但是在删除事件处理程序时，传给 <code>removeEventListener()</code> 的参数必须与之前一致，且 IE9 以下不支持。</li></ul><p>事件处理函数需要注意的：</p><ul><li><code>this</code> 指的是 <code>target</code> 或 <code>currentTarget</code>。</li><li>两种 DOM 方法都会给事件处理函数传一个事件对象作为参数。HTML 方法直接引用 <code>event</code>。</li></ul></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook/edit/master/docs/document-object-model/events/event-handlers-or-listener.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">7/3/2020, 2:22:19 PM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/javascript-guidebook/umi.91335f51.js"></script>
    <script src="/javascript-guidebook/docs__document-object-model__events__event-handlers-or-listener.md.15ce3755.async.js"></script>
  </body>
</html>
