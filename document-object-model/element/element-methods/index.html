<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/javascript-guidebook/umi.css" />
    <script>
      window.routerBase = "/javascript-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.22
    </script>
    <title>Element 方法</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/javascript-guidebook-favicon.png&#x27;)" href="/javascript-guidebook//">JavaScript Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/javascript-guidebook//basic-concept">基本语法</a><a href="/javascript-guidebook//standard-built-in-objects">内置对象</a><a href="/javascript-guidebook//core-modules">核心模块</a><a href="/javascript-guidebook//object-oriented-programming">OOP</a><a href="/javascript-guidebook//browser-object-model">BOM</a><a aria-current="page" class="active" href="/javascript-guidebook//document-object-model">DOM</a><a href="/javascript-guidebook//computer-networks">计算机网络</a><a href="/javascript-guidebook//design-patterns">设计模式</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/javascript-guidebook-favicon.png&#x27;)" href="/javascript-guidebook//"></a><h1>JavaScript Guidebook</h1><p>JavaScript 完全知识体系</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/javascript-guidebook//basic-concept">基本语法</a></li><li><a href="/javascript-guidebook//standard-built-in-objects">内置对象</a></li><li><a href="/javascript-guidebook//core-modules">核心模块</a></li><li><a href="/javascript-guidebook//object-oriented-programming">OOP</a></li><li><a href="/javascript-guidebook//browser-object-model">BOM</a></li><li><a aria-current="page" class="active" href="/javascript-guidebook//document-object-model">DOM</a></li><li><a href="/javascript-guidebook//computer-networks">计算机网络</a></li><li><a href="/javascript-guidebook//design-patterns">设计模式</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/javascript-guidebook//document-object-model">DOM 文档对象模型</a></li><li><a href="/javascript-guidebook//document-object-model/dom">文档对象模型</a><ul><li><a href="/javascript-guidebook//document-object-model/dom/dom"><span>文档对象模型</span></a></li><li><a href="/javascript-guidebook//document-object-model/dom/hierarchy-of-nodes"><span>节点层次</span></a></li><li><a href="/javascript-guidebook//document-object-model/dom/event-target"><span>EventTarget</span></a></li></ul></li><li><a href="/javascript-guidebook//document-object-model/node">Node</a><ul><li><a href="/javascript-guidebook//document-object-model/node/node"><span>Node</span></a></li><li><a href="/javascript-guidebook//document-object-model/node/node-properties"><span>Node 属性</span></a></li><li><a href="/javascript-guidebook//document-object-model/node/node-methods"><span>Node 方法</span></a></li></ul></li><li><a href="/javascript-guidebook//document-object-model/document">Document</a><ul><li><a href="/javascript-guidebook//document-object-model/document/document"><span>Document</span></a></li><li><a href="/javascript-guidebook//document-object-model/document/document-properties"><span>Document 属性</span></a></li><li><a href="/javascript-guidebook//document-object-model/document/document-methods"><span>Document 方法</span></a></li></ul></li><li><a aria-current="page" class="active" href="/javascript-guidebook//document-object-model/element">Element</a><ul><li><a href="/javascript-guidebook//document-object-model/element/element"><span>Element</span></a></li><li><a href="/javascript-guidebook//document-object-model/element/element-properties"><span>Element 属性</span></a></li><li><a aria-current="page" class="active" href="/javascript-guidebook//document-object-model/element/element-methods"><span>Element 方法</span></a></li><li><a href="/javascript-guidebook//document-object-model/element/html-element"><span>HTMLElement</span></a></li></ul></li><li><a href="/javascript-guidebook//document-object-model/dynamic-collection">动态集合</a><ul><li><a href="/javascript-guidebook//document-object-model/dynamic-collection/node-list"><span>NodeList</span></a></li><li><a href="/javascript-guidebook//document-object-model/dynamic-collection/named-node-map"><span>NamedNodeMap</span></a></li><li><a href="/javascript-guidebook//document-object-model/dynamic-collection/html-collection"><span>HTMLCollection</span></a></li><li><a href="/javascript-guidebook//document-object-model/dynamic-collection/dom-token-list"><span>DOMTokenList</span></a></li></ul></li><li><a href="/javascript-guidebook//document-object-model/events">DOM 事件流</a><ul><li><a href="/javascript-guidebook//document-object-model/events/event-flow"><span>事件流</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-handlers-or-listener"><span>事件处理程序</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/the-event-object"><span>事件对象</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-delegation"><span>事件委托</span></a></li></ul></li><li><a href="/javascript-guidebook//document-object-model/events/event-types">事件类型</a><ul><li><a href="/javascript-guidebook//document-object-model/events/event-types/event-types"><span>事件类型</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/resource-events"><span>资源事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/network-events"><span>网络事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/focus-events"><span>焦点事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/websocket-events"><span>WebSocket 事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/session-history-events"><span>会话历史事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/css-animation-events"><span>CSS 动画事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/css-transition-events"><span>CSS 过渡事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/form-events"><span>表单事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/printing-events"><span>打印事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/text-composition-events"><span>文本写作事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/view-events"><span>视图事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/clipboard-events"><span>剪贴板事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/keyboard-events"><span>键盘事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/mouse-events"><span>鼠标事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/drag-and-drop-events"><span>拖拽事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/media-events"><span>媒体事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/progress-events"><span>进度条事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/storage-events"><span>存储事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/update-events"><span>更新事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/value-change-events"><span>值变化事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/uncategorized-events"><span>未分类事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/touch-events"><span>触控事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/the-orientationchange-event"><span>设备事件</span></a></li><li><a href="/javascript-guidebook//document-object-model/events/event-types/ui-events"><span>用户界面事件</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="位置方法" data-depth="2" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#位置方法"><span>位置方法</span></a></li><li title="getBoundingClientRect" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#getboundingclientrect"><span>getBoundingClientRect</span></a></li><li title="getClientRects" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#getclientrects"><span>getClientRects</span></a></li><li title="computedStyleMap" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#computedstylemap"><span>computedStyleMap</span></a></li><li title="样式方法" data-depth="2" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#样式方法"><span>样式方法</span></a></li><li title="matches" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#matches"><span>matches</span></a></li><li title="animate" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#animate"><span>animate</span></a></li><li title="getAnimations" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#getanimations"><span>getAnimations</span></a></li><li title="属性方法" data-depth="2" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#属性方法"><span>属性方法</span></a></li><li title="getAttribute" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#getattribute"><span>getAttribute</span></a></li><li title="setAttribute" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#setattribute"><span>setAttribute</span></a></li><li title="hasAttribute" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#hasattribute"><span>hasAttribute</span></a></li><li title="removeAttribute" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#removeattribute"><span>removeAttribute</span></a></li><li title="滚动方法" data-depth="2" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#滚动方法"><span>滚动方法</span></a></li><li title="scroll" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#scroll"><span>scroll</span></a></li><li title="scrollBy" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#scrollby"><span>scrollBy</span></a></li><li title="scrollIntoView" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#scrollintoview"><span>scrollIntoView</span></a></li><li title="scrollTo" data-depth="3" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#scrollto"><span>scrollTo</span></a></li><li title="requestFullscreen" data-depth="2" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#requestfullscreen"><span>requestFullscreen</span></a></li><li title="事件对象" data-depth="2" class=""><a href="/javascript-guidebook//document-object-model/element/element-methods#事件对象"><span>事件对象</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="element-方法"><a aria-hidden="true" href="#element-方法"><span class="icon icon-link"></span></a>Element 方法</h1><h2 id="位置方法"><a aria-hidden="true" href="#位置方法"><span class="icon icon-link"></span></a>位置方法</h2><h3 id="getboundingclientrect"><a aria-hidden="true" href="#getboundingclientrect"><span class="icon icon-link"></span></a>getBoundingClientRect</h3><p>获取元素的大小及其相对于视口的位置</p><h3 id="getclientrects"><a aria-hidden="true" href="#getclientrects"><span class="icon icon-link"></span></a>getClientRects</h3><p>获取一个指向客户端中每一个盒子的边界矩形的矩形集合</p><h3 id="computedstylemap"><a aria-hidden="true" href="#computedstylemap"><span class="icon icon-link"></span></a>computedStyleMap</h3><h2 id="样式方法"><a aria-hidden="true" href="#样式方法"><span class="icon icon-link"></span></a>样式方法</h2><h3 id="matches"><a aria-hidden="true" href="#matches"><span class="icon icon-link"></span></a>matches</h3><p>使用 <code>Element.matches</code> 方法可以通过精准匹配样式。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="Element.matches(selectorString);
" data-status="copy"></button><div class="token-line"><span class="token maybe-class-name">Element</span><span class="token punctuation">.</span><span class="token method function property-access">matches</span><span class="token punctuation">(</span><span class="token plain">selectorString</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>示例：</p><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="&lt;ul id=&quot;foo&quot;&gt;
  &lt;li class=&quot;class-1&quot;&gt;item 1&lt;/li&gt;
  &lt;li&gt;item 2&lt;/li&gt;
  &lt;li class=&quot;class-1&quot;&gt;item 3&lt;/li&gt;
  ......
  &lt;li&gt;item n&lt;/li&gt;
&lt;/ul&gt;
// ...... 代表中间还有未知数个 li
" data-status="copy"></button><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">ul</span><span class="token tag"> </span><span class="token tag attr-name">id</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">foo</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token tag punctuation">&lt;</span><span class="token tag">li</span><span class="token tag"> </span><span class="token tag attr-name">class</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">class-1</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token plain">item 1</span><span class="token tag punctuation">&lt;/</span><span class="token tag">li</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token tag punctuation">&lt;</span><span class="token tag">li</span><span class="token tag punctuation">&gt;</span><span class="token plain">item 2</span><span class="token tag punctuation">&lt;/</span><span class="token tag">li</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token tag punctuation">&lt;</span><span class="token tag">li</span><span class="token tag"> </span><span class="token tag attr-name">class</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">class-1</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token plain">item 3</span><span class="token tag punctuation">&lt;/</span><span class="token tag">li</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  ......</span></div><div class="token-line"><span class="token plain">  </span><span class="token tag punctuation">&lt;</span><span class="token tag">li</span><span class="token tag punctuation">&gt;</span><span class="token plain">item n</span><span class="token tag punctuation">&lt;/</span><span class="token tag">li</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">ul</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">// ...... 代表中间还有未知数个 li</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><ul><li>这里，我们想把 <code>#foo</code> 元素下的 <code>li</code> 元素（并且它的 <code>class</code> 为 <code>class-1</code>）的点击事件委托代理到 <code>ul#foo</code> 之上。</li><li>如果通过上述的方法我们还需要在 <code>if (target.nodeName.toLocaleLowerCase === &#x27;li&#x27;)</code> 判断之中在加入一个判断 <code>target.nodeName.className === &#x27;class-1&#x27;</code>。</li><li>但是如果想像 CSS 选择器般做更加灵活的匹配的话，上面的判断未免就太多了，并且很难做到灵活性。</li></ul><p>这里可以使用 <code>Element.matches</code> API 来匹配。<code>Element.matches</code> API 的基本使用方法：</p><p><code>selectorString</code> 既是 CSS 那样的选择器规则，比如本例中可以使用 <code>target.matches(&#x27;li.class-1&#x27;)</code>，他会返回一个布尔值，如果 <code>target</code> 元素是标签 <code>li</code> 并且它的类是 <code>class-1</code> ，那么就会返回 <code>true</code>，否则返回 <code>false</code>；</p><p>当然它的兼容性还有一些问题，需要 IE9 及以上的现代化浏览器版本。</p><p>我们可以使用 Polyfill 来解决兼容性上的问题：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="if (!Element.prototype.matches) {
  Element.prototype.matches =
    Element.prototype.matchesSelector ||
    Element.prototype.mozMatchesSelector ||
    Element.prototype.msMatchesSelector ||
    Element.prototype.oMatchesSelector ||
    Element.prototype.webkitMatchesSelector ||
    function(s) {
      var matches = (this.document || this.ownerDocument).querySelectorAll(s),
        i = matches.length;
      while (--i &gt;= 0 &amp;&amp; matches.item(i) !== this) {}
      return i &gt; -1;
    };
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token property-access">matches</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token property-access">matches</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token property-access">matchesSelector</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token property-access">mozMatchesSelector</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token property-access">msMatchesSelector</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token property-access">oMatchesSelector</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token property-access">webkitMatchesSelector</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">var</span><span class="token plain"> matches </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">document</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">ownerDocument</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">querySelectorAll</span><span class="token punctuation">(</span><span class="token plain">s</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        i </span><span class="token operator">=</span><span class="token plain"> matches</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">while</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">--</span><span class="token plain">i </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> matches</span><span class="token punctuation">.</span><span class="token method function property-access">item</span><span class="token punctuation">(</span><span class="token plain">i</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> i </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>加上 <code>Element.matches</code> 之后就可以来实现我们的需求了：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="if (!Element.prototype.matches) {
  Element.prototype.matches =
    Element.prototype.matchesSelector ||
    Element.prototype.mozMatchesSelector ||
    Element.prototype.msMatchesSelector ||
    Element.prototype.oMatchesSelector ||
    Element.prototype.webkitMatchesSelector ||
    function(s) {
      const matches = (this.document || this.ownerDocument).querySelectorAll(s),
        i = matches.length;
      while (--i &gt;= 0 &amp;&amp; matches.item(i) !== this) {}
      return i &gt; -1;
    };
}

document.getElementById(&#x27;foo&#x27;).addEventListener(&#x27;click&#x27;, function(e) {
  // 兼容性处理
  const event = e || window.event;
  const target = event.target || event.srcElement;

  if (target.matches(&#x27;li.class-1&#x27;)) {
    console.log(&#x27;the content is: &#x27;, target.innerHTML);
  }
});
" data-status="copy"></button><div class="token-line"><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token property-access">matches</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token property-access">matches</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token property-access">matchesSelector</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token property-access">mozMatchesSelector</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token property-access">msMatchesSelector</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token property-access">oMatchesSelector</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token class-name">Element</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token property-access">webkitMatchesSelector</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">const</span><span class="token plain"> matches </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">document</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">ownerDocument</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">querySelectorAll</span><span class="token punctuation">(</span><span class="token plain">s</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        i </span><span class="token operator">=</span><span class="token plain"> matches</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">while</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">--</span><span class="token plain">i </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> matches</span><span class="token punctuation">.</span><span class="token method function property-access">item</span><span class="token punctuation">(</span><span class="token plain">i</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> i </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">&#x27;foo&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;click&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// 兼容性处理</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> event </span><span class="token operator">=</span><span class="token plain"> e </span><span class="token operator">||</span><span class="token plain"> </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">event</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> target </span><span class="token operator">=</span><span class="token plain"> event</span><span class="token punctuation">.</span><span class="token property-access">target</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> event</span><span class="token punctuation">.</span><span class="token property-access">srcElement</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">target</span><span class="token punctuation">.</span><span class="token method function property-access">matches</span><span class="token punctuation">(</span><span class="token string">&#x27;li.class-1&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;the content is: &#x27;</span><span class="token punctuation">,</span><span class="token plain"> target</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="animate"><a aria-hidden="true" href="#animate"><span class="icon icon-link"></span></a>animate</h3><p>Element 接口的 <code>animate</code> 方法是一个创建新 Animation 的便捷方法，将它应用于元素，然后运行动画。它将返回一个新建的 Animation 对象实例</p><h3 id="getanimations"><a aria-hidden="true" href="#getanimations"><span class="icon icon-link"></span></a>getAnimations</h3><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="Promise.all(elem.getAnimations({ subtree: true }).map(animation =&gt; animation.finished)).then(() =&gt;
  elem.remove()
);
" data-status="copy"></button><div class="token-line"><span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">all</span><span class="token punctuation">(</span><span class="token plain">elem</span><span class="token punctuation">.</span><span class="token method function property-access">getAnimations</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> subtree</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">animation</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> animation</span><span class="token punctuation">.</span><span class="token property-access">finished</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  elem</span><span class="token punctuation">.</span><span class="token method function property-access">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="属性方法"><a aria-hidden="true" href="#属性方法"><span class="icon icon-link"></span></a>属性方法</h2><h3 id="getattribute"><a aria-hidden="true" href="#getattribute"><span class="icon icon-link"></span></a>getAttribute</h3><p>获取元素中指定属性</p><h3 id="setattribute"><a aria-hidden="true" href="#setattribute"><span class="icon icon-link"></span></a>setAttribute</h3><p>设置元素中指定属性</p><h3 id="hasattribute"><a aria-hidden="true" href="#hasattribute"><span class="icon icon-link"></span></a>hasAttribute</h3><p>判断元素中是否存在置顶属性</p><h3 id="removeattribute"><a aria-hidden="true" href="#removeattribute"><span class="icon icon-link"></span></a>removeAttribute</h3><p>移除元素中指定属性</p><h2 id="滚动方法"><a aria-hidden="true" href="#滚动方法"><span class="icon icon-link"></span></a>滚动方法</h2><h3 id="scroll"><a aria-hidden="true" href="#scroll"><span class="icon icon-link"></span></a>scroll</h3><p><code>Element.scroll</code> 方法是用于在给定的元素中滚动到某个特定坐标的 Element 接口。</p><h3 id="scrollby"><a aria-hidden="true" href="#scrollby"><span class="icon icon-link"></span></a>scrollBy</h3><p><code>Element.scrollBy</code> 方法是使得元素滚动一段特定距离的 Element 接口。</p><h3 id="scrollintoview"><a aria-hidden="true" href="#scrollintoview"><span class="icon icon-link"></span></a>scrollIntoView</h3><p><code>Element.scrollIntoView</code> 方法让当前的元素滚动到浏览器窗口的可视区域内。</p><h3 id="scrollto"><a aria-hidden="true" href="#scrollto"><span class="icon icon-link"></span></a>scrollTo</h3><p><code>Element.scrollTo</code> 方法可以使界面滚动到给定元素的指定坐标位置。</p><h2 id="requestfullscreen"><a aria-hidden="true" href="#requestfullscreen"><span class="icon icon-link"></span></a>requestFullscreen</h2><h2 id="事件对象"><a aria-hidden="true" href="#事件对象"><span class="icon icon-link"></span></a>事件对象</h2><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// Event 对象爱哪个
const event = window.event || event;

// 事件的目标节点
const target = event.target || event.srcElement;
" data-status="copy"></button><div class="token-line"><span class="token comment">// Event 对象爱哪个</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> event </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">event</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> event</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 事件的目标节点</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> target </span><span class="token operator">=</span><span class="token plain"> event</span><span class="token punctuation">.</span><span class="token property-access">target</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> event</span><span class="token punctuation">.</span><span class="token property-access">srcElement</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook/edit/master/docs/document-object-model/element/element-methods.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">10/2/2020, 2:13:31 PM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/javascript-guidebook/umi.js"></script>
    <script src="/javascript-guidebook/docs__document-object-model__element__element-methods.md.js"></script>
  </body>
</html>
