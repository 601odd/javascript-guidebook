# 文档对象模型

tags: 前端生存指南

## 概念

> DOM 全称是 Document Object Model，也就是文档对象模型，是W3C组织推荐的处理可扩展置标语言的标准编程接口。

    DOM可以以一种独立于平台和语言的方式访问和修改一个文档的内容和结构。也就是说，这是表示和处理一个HTML或XML文档的常用方法。DOM技术是用户页面可以动态的变化，从而大大使页面的交互性增强。但是DOM必须通过JavaScript等脚本语言来进行读取，改变HTML、XHTML以及XML等文档。

　  在应用程序中，基于DOM的XML分析器将一个XML文档转换成一个对象模型的集合（通常称DOM树），应用程序通过对这个对象模型的操作，来实现对XML文档数据的操作。

　　通过DOM接口，应用程序可以在任何时候访问XML文档中的任何一部分数据，因此，这种利用DOM接口的机制也被称作**随机访问机制**。

　　DOM树所提供的随机访问方式给应用程序的开发带来了很大的灵活性，它可以任意地控制整个XML文档中的内容。

　　然而，由于DOM分析器把整个XML文档转化成DOM树放在了内存中，因此，当文档比较大或结构比较复杂时，对内存的需求就比较高。

　　而且，对于结构复杂的树的遍历也是一项耗时的操作。

　　所以，DOM分析器对机器性能的要求比较高，实现效率不十分理想。

　　由于DOM分析器所采用的树结构的思想与XML文档的结构相吻合，同时鉴于随机访问所带来的方便，因此，DOM分析器还是有很广泛的应用价值的。
　　

## DOM组成

对于XML应用开发来说，**DOM就是一个对象化的XML数据接口，一个与语言无关、与平台无关的标准接口规范。**

　　DOM定义了HTML文档和XML文档的逻辑结构，给出了一种访问和处理这两种文档的方法。

　　***文档代表的是数据，而DOM则代表了如何去处理这些数据。***

　　作为W3C的标准接口规范，目前，**DOM由三部分组成，包括：核心（core）、HTML接口和XML接口。**

　　核心部分是结构化文档比较底层对象的集合，这一部分所定义的对象已经完全可以表达出任何HTML和XML文档中的数据了。

　　HTML接口和XML接口两部分则是专为操作具体HTML文档和XML文档所提供的高级接口。

## DOM结构

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>示例页面</title>
</head>
<body>
<h2>这是一个示例页面</h2>
<p id="p" title="this is p.">这是一个段落内容.</p>
</body>
</html>
```

## DOM树

![DOM树形结构][1]

要严格区分XML文档树中的根节点与根元素节点：

文档（根节点）和根元素节点是两回事。

根节点代表整个文档，是我们解析XML文档的入口，通过它获取到Document对象；

根元素节点代表XML文档的根元素，必须要在获得Document对象之后才能一层一层地去访问它的元素。

## DOM的四个基本接口
　
　　在DOM接口规范中，有四个基本的接口：`Document`, `Node`, `NodeList`, `NamedNodeMap`。

### Document

　　`Document` 接口是对文档进行操作的入口，它是从 `Node` 接口继承过来的。 

### Node

　　`Node` 接口是其他大多数接口的父类。

　　在DOM树中，`Node` 接口代表了树中的一个节点。

### NodeList
　　
　　`NodeList` 接口是一个节点的集合，它包含了某个节点中的所有子节点。

　　它提供了对节点集合的抽象定义，并不包含如何实现这个节点集的定义。

　　`NodeList` 用于表示有顺序关系的一组节点，比如某个节点的子节点序列。

　　在DOM中，`NodeList` 的对象是live的，对文档的改变，会直接反映到相关的 `NodeList` 对象中。

 

### NamedNodeMap

　　`NamedNodeMap` 接口也是一个节点的集合，通过该接口，可以建立节点名和节点之间的一一映射关系，从而利用节点名可以直接访问特定的节点，这个接口主要用在属性节点的表示上。

　　尽管 `NamedNodeMap` 所包含的节点可以通过索引来进行访问，但是这只是提供了一种枚举方法，`NamedNodeMap` 所包含的节点集中节点是无序的。

　　与 `NodeList` 相同，在DOM中，`NamedNodeMap` 对象也是live的。


  [1]: http://images.cnitblog.com/blog/325852/201306/01201336-436a67c166524f2db6818926d2cef030.png