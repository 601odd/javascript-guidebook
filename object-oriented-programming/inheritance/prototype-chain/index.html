<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/javascript-guidebook/umi.css" />
    <script>
      window.routerBase = "/javascript-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.20
    </script>
    <title>原型链</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/javascript-guidebook-favicon.png&#x27;)" href="/javascript-guidebook//">JavaScript Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/javascript-guidebook//basic-concept">基本语法</a><a href="/javascript-guidebook//standard-built-in-objects">内置对象</a><a href="/javascript-guidebook//core-modules">核心模块</a><a aria-current="page" class="active" href="/javascript-guidebook//object-oriented-programming">OOP</a><a href="/javascript-guidebook//browser-object-model">BOM</a><a href="/javascript-guidebook//document-object-model">DOM</a><a href="/javascript-guidebook//computer-networks">计算机网络</a><a href="/javascript-guidebook//design-patterns">设计模式</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/javascript-guidebook-favicon.png&#x27;)" href="/javascript-guidebook//"></a><h1>JavaScript Guidebook</h1><p>JavaScript 完全知识体系</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/javascript-guidebook//basic-concept">基本语法</a></li><li><a href="/javascript-guidebook//standard-built-in-objects">内置对象</a></li><li><a href="/javascript-guidebook//core-modules">核心模块</a></li><li><a aria-current="page" class="active" href="/javascript-guidebook//object-oriented-programming">OOP</a></li><li><a href="/javascript-guidebook//browser-object-model">BOM</a></li><li><a href="/javascript-guidebook//document-object-model">DOM</a></li><li><a href="/javascript-guidebook//computer-networks">计算机网络</a></li><li><a href="/javascript-guidebook//design-patterns">设计模式</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a aria-current="page" class="active" href="/javascript-guidebook//object-oriented-programming">面向对象编程</a><ul><li><a href="/javascript-guidebook//object-oriented-programming"><span>目录</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/object-oriented-programming"><span>简介</span></a></li></ul></li><li><a href="/javascript-guidebook//object-oriented-programming/object-understand">理解对象</a><ul><li><a href="/javascript-guidebook//object-oriented-programming/object-understand/the-object-type"><span>对象类型</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/object-understand/manipulating-property"><span>属性操作</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/object-understand/attributes-object"><span>对象属性描述符</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/object-understand/the-object-status"><span>对象状态</span></a></li></ul></li><li><a href="/javascript-guidebook//object-oriented-programming/object-creation">创建对象</a><ul><li><a href="/javascript-guidebook//object-oriented-programming/object-creation/the-factory-pattern"><span>工厂模式</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/object-creation/the-constructor-pattern"><span>构造函数模式</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/object-creation/the-prototype-pattern"><span>原型模式</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/object-creation/combination-constructor-and-prototype-pattern"><span>组合使用构造函数模式和原型模式</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/object-creation/dynamic-prototype-pattern"><span>动态原型模式</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/object-creation/parastic-constructor-pattern"><span>寄生构造函数模式</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/object-creation/durable-constructor-pattern"><span>稳妥构造函数模式</span></a></li></ul></li><li><a aria-current="page" class="active" href="/javascript-guidebook//object-oriented-programming/inheritance">继承</a><ul><li><a aria-current="page" class="active" href="/javascript-guidebook//object-oriented-programming/inheritance/prototype-chain"><span>原型链</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/inheritance/constructor-stealing"><span>借用构造函数</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/inheritance/combination-inheritance"><span>组合继承</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/inheritance/prototypal-inheritance"><span>原型式继承</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/inheritance/parasitic-inheritance"><span>寄生式继承</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/inheritance/parasitic-combination-inheritance"><span>寄生组合式继承</span></a></li></ul></li><li><a href="/javascript-guidebook//object-oriented-programming/class-definitions">类</a><ul><li><a href="/javascript-guidebook//object-oriented-programming/class-definitions/class-basic"><span>类的基本语法</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/class-definitions/class-extends"><span>类的继承</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/class-definitions/class-private-member"><span>私有成员</span></a></li><li><a href="/javascript-guidebook//object-oriented-programming/class-definitions/class-static-member"><span>静态成员</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="显式原型" data-depth="2" class=""><a href="/javascript-guidebook//object-oriented-programming/inheritance/prototype-chain#显式原型"><span>显式原型</span></a></li><li title="隐式原型" data-depth="2" class=""><a href="/javascript-guidebook//object-oriented-programming/inheritance/prototype-chain#隐式原型"><span>隐式原型</span></a></li><li title="构造函数" data-depth="2" class=""><a href="/javascript-guidebook//object-oriented-programming/inheritance/prototype-chain#构造函数"><span>构造函数</span></a></li><li title="原型对象" data-depth="2" class=""><a href="/javascript-guidebook//object-oriented-programming/inheritance/prototype-chain#原型对象"><span>原型对象</span></a></li><li title="原型对象的指向" data-depth="2" class=""><a href="/javascript-guidebook//object-oriented-programming/inheritance/prototype-chain#原型对象的指向"><span>原型对象的指向</span></a></li><li title="字面量方式" data-depth="3" class=""><a href="/javascript-guidebook//object-oriented-programming/inheritance/prototype-chain#字面量方式"><span>字面量方式</span></a></li><li title="构造器方式" data-depth="3" class=""><a href="/javascript-guidebook//object-oriented-programming/inheritance/prototype-chain#构造器方式"><span>构造器方式</span></a></li><li title="Object.create 方式" data-depth="3" class=""><a href="/javascript-guidebook//object-oriented-programming/inheritance/prototype-chain#objectcreate-方式"><span>Object.create 方式</span></a></li><li title="原型对象与实例" data-depth="2" class=""><a href="/javascript-guidebook//object-oriented-programming/inheritance/prototype-chain#原型对象与实例"><span>原型对象与实例</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="原型链"><a aria-hidden="true" href="#原型链"><span class="icon icon-link"></span></a>原型链</h1><p>ECMAScript 中描述了原型链的概念，并将原型链作为实现继承的主要方法。其基本思想是利用原型让一个引用类型继承另一个引用类型的属性和方法。</p><p>搞懂原型对象和原型链其实就是搞懂 <code>prototype</code>、<code>__proto__</code> 和 <code>constructor</code> 之间的相互关系。</p><p>我们通过示例并附加图例阐述这种复杂的相互关系。</p></div><img alt="原型链" src="/javascript-guidebook/static/prototype-chain.bbfd7b97.jpg" width="720"/><div class="markdown"><p><strong>图例</strong></p><ul><li>红色箭头表示 <code>__proto__</code> 属性指向</li><li>绿色箭头表示 <code>prototype</code> 属性指向</li><li>棕色箭头表示本身具有的 <code>constructor</code> 属性</li><li>蓝色方块表示对象</li><li>浅绿方块表示函数</li></ul><p>在 JavaScript 中，这三者之间依附在不同的引用对象类型上。</p><ul><li><strong>对象</strong>：<code>__proto__</code> 和 <code>constructor</code> 是对象独有的。</li><li><strong>函数</strong>：<code>prototype</code> 是函数独有的。但是函数也是对象，所以函数也有 <code>__proto__</code> 和 <code>constructor</code>。</li></ul><h2 id="显式原型"><a aria-hidden="true" href="#显式原型"><span class="icon icon-link"></span></a>显式原型</h2></div><img alt="显式原型" src="/javascript-guidebook/static/explicit-prototype.83d1754b.jpg" width="720"/><div class="markdown"><p>显式原型对象 <code>prototype</code> 由<span style="color:red;font-weight:bold">函数所独有</span>，它是从<span style="color:red;font-weight:bold">一个函数指向另一个对象</span>。它的含义是<span style="color:red;font-weight:bold">函数的原型对象</span>，也就是这个函数（其实所有函数都可以作为构造函数）所创建的实例的原型对象。由此可知：<code>foo.__proto__ === Foo.prototype</code>，它们两个完全一样。</p><p>那 <code>prototype</code> 属性作用又是什么呢？它的<span style="color:red;font-weight:bold">作用</span>就是包含可以由特定类型的所有实例共享的属性和方法，也就是让该函数的实例化对象们都可以找到公用的属性和方法。</p><p><strong>任何函数在创建的时候，其实会默认同时创建该函数的 <code>prototype</code> 对象。</strong></p><h2 id="隐式原型"><a aria-hidden="true" href="#隐式原型"><span class="icon icon-link"></span></a>隐式原型</h2></div><img alt="隐式原型" src="/javascript-guidebook/static/hidden-prototype.bee5023d.jpg" width="800"/><div class="markdown"><p>在 JavaScript 中的<span style="color:red;font-weight:bold">对象</span>中都有一个 <code>__proto__</code> 属性，从上图可以看出<span style="color:red;font-weight:bold">一个对象指向另一个对象</span>，即指向相对应的对象的原型对象。这个原型对象称为<span style="color:red;font-weight:bold">隐式原型对象</span>。</p><p>隐式原型对象的作用在于，当访问一个对象的属性或方法时，如果该对象内部不存在这个属性，那么就会从它的 <code>__proto__</code> 属性所指向的（原型）对象中寻找（原型也是对象，也有它自己的原型），如果原型对象中也找不到，就会继续在该原型对象的原型对象中找，以此类推，直到找到属性或方法为止，或者查找到顶层原型对象 <code>null</code>，就结束查找，返回 <code>undefined</code>。</p><p>整个查找过程中，从当前对象出发沿着原型对象（<code>__proto__</code>）构成的链条查找相关属性和方法直到结束，这些相互关联的对象组成的链条就是<span style="color:red;font-weight:bold">原型链</span>。</p><h2 id="构造函数"><a aria-hidden="true" href="#构造函数"><span class="icon icon-link"></span></a>构造函数</h2></div><img alt="构造函数" src="/javascript-guidebook/static/constructor.f2783bdc.jpg" width="800"/><div class="markdown"><p>属性 <code>constructor</code> 也是<span style="color:red;font-weight:bold">对象</span>才拥有的，它是从<span style="color:red;font-weight:bold">一个对象指向一个函数</span>，含义就是<span style="color:red;font-weight:bold">指向该对象的构造函数</span>，每个对象都有构造函数（本身拥有或继承而来，继承而来的要结合 <code>__proto__</code> 属性查看会更清楚点），从上图中可以看出 <span style="color:red;font-weight:bold">Function</span> 这个对象比较特殊，它的构造函数就是它自己（因为 Function 可以看成是一个函数，也可以是一个对象），所有函数和对象最终都是由 Function 构造函数得来，所以 <code>constructor</code> 属性的终点就是 <span style="color:red;font-weight:bold">Function</span> 这个函数。</p><h2 id="原型对象"><a aria-hidden="true" href="#原型对象"><span class="icon icon-link"></span></a>原型对象</h2><p>原型对象即为当前实例对象的父对象</p><table><thead><tr><th align="left">显式原型对象</th><th align="left">隐式原型对象</th></tr></thead><tbody><tr><td align="left">属性 <code>prototype</code></td><td align="left">属性 <code>__proto__</code></td></tr><tr><td align="left">函数独有</td><td align="left">对象独有（函数也是对象，因此函数也有该属性）</td></tr><tr><td align="left">定义函数时被自动赋值，值默认为 <code>{}</code></td><td align="left">在创建实例对象时被自动添加，并赋值为构造函数的 <code>prototype</code> 值</td></tr><tr><td align="left">用于实现基于原型的继承与属性的共享</td><td align="left">构成原型链，同样用于实现基于原型的继承</td></tr></tbody></table><p>🌰 <strong>标准示例：访问原型链中的原型对象</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const Foo = function() {};

const foo = new Foo();

// 构造函数 Foo {} 是函数 foo 的原型对象
console.log(foo.__proto__);

// 构造函数 Object {} 是函数 Function 的原型对象
console.log(foo.__proto__.__proto__);

// 原型链顶层
console.log(foo.__proto__.__proto__.__proto__);
// null
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name">Foo</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> foo </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 构造函数 Foo {} 是函数 foo 的原型对象</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">foo</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 构造函数 Object {} 是函数 Function 的原型对象</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">foo</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 原型链顶层</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">foo</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// null</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><strong>原型链中查找属性方法和访问原型链中的原型对象的区别</strong></p><ul><li>在原型链中查找属性或方法，如果没有查找到相关属性或方法，返回的是 <code>undefined</code>，表示原型链中没有该属性或方法。</li><li>而通过访问原型链中的原型对象，到达原型链终点，即 <code>Object.prototype</code> 的值为 <code>null</code>。</li></ul><h2 id="原型对象的指向"><a aria-hidden="true" href="#原型对象的指向"><span class="icon icon-link"></span></a>原型对象的指向</h2><p><code>__proto__</code> 的指向取决于对象创建时的实现方式。</p><h3 id="字面量方式"><a aria-hidden="true" href="#字面量方式"><span class="icon icon-link"></span></a>字面量方式</h3><p>当通过字面量方式创建对象时，它的原型就是 <code>Object.prototype</code>。</p><p>虽然我们无法直接访问内置属性 <code>__proto__</code>，但我们可以通过 <code>Object.getPrototypeOf()</code> 或对象的属性 <code>__proto__</code> 获取对象的原型。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const foo = {};

console.log(foo.__proto__ === Object.prototype);
// true

console.log(Object.getPrototypeOf(foo) === Object.prototype);
// true
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> foo </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">foo</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">getPrototypeOf</span><span class="token punctuation">(</span><span class="token plain">foo</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="构造器方式"><a aria-hidden="true" href="#构造器方式"><span class="icon icon-link"></span></a>构造器方式</h3><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const Foo = function() {};

const foo = new Foo();

console.log(foo.__proto__ === Foo.prototype);
// true

console.log(Object.getPrototypeOf(foo) === Foo.prototype);
// true
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name">Foo</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> foo </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">foo</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token class-name">Foo</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">getPrototypeOf</span><span class="token punctuation">(</span><span class="token plain">foo</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token class-name">Foo</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="objectcreate-方式"><a aria-hidden="true" href="#objectcreate-方式"><span class="icon icon-link"></span></a>Object.create 方式</h3><p>通过 <code>Object.create()</code> 方式创建的对象会以传入的对象参数为对象的原型。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const foo = {};

const bar = Object.create(foo);

console.log(bar.__proto__ === foo);
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> foo </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> bar </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">create</span><span class="token punctuation">(</span><span class="token plain">foo</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">bar</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> foo</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="原型对象与实例"><a aria-hidden="true" href="#原型对象与实例"><span class="icon icon-link"></span></a>原型对象与实例</h2><p>通过 <code>instanceof</code> 操作符可以确定原型与实例的关系。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// 假设 instanceof 操作符左边是 L 右边是 R
L instanceof R

// instanceof 运算时 通过判断 L 的原型链是否存在 R.prototype
L.__proto__.__proto__... === R.prototype
" data-status="copy"></button><div class="token-line"><span class="token comment">// 假设 instanceof 操作符左边是 L 右边是 R</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token constant">L</span><span class="token plain"> </span><span class="token keyword">instanceof</span><span class="token plain"> </span><span class="token class-name">R</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// instanceof 运算时 通过判断 L 的原型链是否存在 R.prototype</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token constant">L</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token spread operator">...</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token class-name">R</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>⚠️ 注意：<code>instanceof</code> 操作符会递归查找 L 的原型链，即 <code>L.__proto__.__proto__.__proto__...</code> 直到找到了或者到达顶层为止。</p><p>构造器 Function 的构造器是它自身：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="Function.constructor === Function; // true
" data-status="copy"></button><div class="token-line"><span class="token class-name">Function</span><span class="token punctuation">.</span><span class="token property-access">constructor</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token known-class-name class-name">Function</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>构造器 Object 的构造器是 Function（因此可得所有构造器的 constructor 都指向 Function）</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="Object.constructor === Function; // true
" data-status="copy"></button><div class="token-line"><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">constructor</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token known-class-name class-name">Function</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>构造器 Function 的 <code>[[Prototype]]</code> 是一个特殊的匿名函数</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="console.log(Function.__proto__); // function(){}
" data-status="copy"></button><div class="token-line"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Function</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// function(){}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>这个特殊的匿名函数的 <code>[[Prototype]]</code> 指向 Object 的 prototype 原型。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="Function.__proto__.__proto__ === Object.prototype; // true
" data-status="copy"></button><div class="token-line"><span class="token known-class-name class-name">Function</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>Object 的 <code>[[Prototype]]</code> 指向 Function 的 prototype 也就是上述的特殊的匿名函数</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="Object.__proto__ === Function.prototype; // true

Function.prototype === Function.__proto__; // true
" data-status="copy"></button><div class="token-line"><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token class-name">Function</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token class-name">Function</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token known-class-name class-name">Function</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>内置对象 Function 和 Object 的关系：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="Function instanceof Object; // true
Object instanceof Function; // true
" data-status="copy"></button><div class="token-line"><span class="token known-class-name class-name">Function</span><span class="token plain"> </span><span class="token keyword">instanceof</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token known-class-name class-name">Object</span><span class="token plain"> </span><span class="token keyword">instanceof</span><span class="token plain"> </span><span class="token class-name">Function</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>其他标准内置对象的字面量原型链关系：</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="console.log(true.__prto__.__proto__ === Object.prototype);

console.log((123).__proto__.__proto__ === Object.prototype);

console.log(&#x27;String&#x27;.__proto__.__proto__ === Object.prototype);

console.log([].__proto__.__proto__ === Object.prototype);

console.log({}.__proto__ === Object.prototype);
" data-status="copy"></button><div class="token-line"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">.</span><span class="token property-access">__prto__</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;String&#x27;</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token property-access">__proto__</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><strong>总结：</strong></p><ul><li>所有的构造器的 constructor 都指向 Function</li><li>Function 的 prototype 指向一个特殊匿名函数，而这个特殊匿名函数的 <code>__proto__</code> 指向 Object.prototype</li></ul><hr/><p><strong>参考资料：</strong></p><ul><li><a href="https://juejin.im/post/5caefd575188251b2822c17e" target="_blank" rel="noopener noreferrer">📝 帮你彻底搞懂 JavaScript 中的 prototype、proto 与 constructor（图解）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook/edit/master/docs/object-oriented-programming/inheritance/prototype-chain.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">9/19/2020, 3:55:47 PM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/javascript-guidebook/umi.js"></script>
    <script src="/javascript-guidebook/docs__object-oriented-programming__inheritance__prototype-chain.md.js"></script>
  </body>
</html>
