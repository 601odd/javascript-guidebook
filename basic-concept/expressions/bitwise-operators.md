# 位运算移位运算符

位运算符将它的操作数视为 32 位元的二进制串（0 和 1 组成）而非十进制、八进制或十六进制数。例如：十进制数字 `9` 用二进制表示为 `1001`，位运算符就是在这个二进制表示上执行运算，但是返回结果是标准的 JavaScript 数值。

**位运算符**

| 运算符     | 用法      | 描述                                                                               |
| ---------- | --------- | ---------------------------------------------------------------------------------- |
| 按位与     | `a & b`   | 在 `a` `b`的位表示中，每一个对应的位都为 1 则返回 1， 否则返回 0                   |
| 按位或     | `a \| b`  | 在`a` `b`的位表示中，每一个对应的位，只要有一个为 1 则返回 1， 否则返回 0          |
| 按位异或   | `a ^ b`   | 在`a` `b`的位表示中，每一个对应的位，两个不相同则返回 1，相同则返回 0              |
| 按位非     | `~ a`     | 反转被操作数的位                                                                   |
| 左移       | `a << b`  | 将 a 的二进制串向左移动 b 位,右边移入 0                                            |
| 算术右移   | `a >> b`  | 把 a 的二进制表示向右移动 `b` 位，丢弃被移出的所有位                               |
| 无符号右移 | `a >>> b` | 把 `a` 的二进制表示向右移动 `b` 位，丢弃被移出的所有位，并把左边空出的位都填充为 0 |

## 位逻辑运算符

概念上来讲, 位逻辑运算符工作流程如下:

- 操作数被转换为 32bit 整數，以位序列（0 和 1 组成）表示。若超過 32bits，則取低位 32bit，如下所示：

```javascript
Before: 11100110111110100000000000000110000000000001;
After: 10100000000000000110000000000001;
```

- 第一个操作数的每一位都与第二个操作数的对应位组对: 第一位对应第一位，第二位对应第二位，以此类推。
- 运算符被应用到每一对"位"上， 最终的运算结果由每一对“位”的运算结果组合起来。

例如，十进制数 9 的二进制表示是 1001，十进制数 15 的二进制表示是 1111。因此，当位运算符应用到这两个值时，结果如下：

**位运算符范例**

| 表达式    | 结果  | 二进制描述                                   |
| --------- | ----- | -------------------------------------------- |
| `15 & 9`  | `9`   | `1111 & 1001 = 1001`                         |
| `15 \| 9` | `15`  | `1111 \| 1001 = 1111`                        |
| `15 ^ 9`  | `6`   | `1111 ^ 1001 = 0110`                         |
| `~15`     | `-16` | `~00000000...00001111 = 11111111...11110000` |
| `~9`      | `-10` | `~00000000...00001001 = 11111111...11110110` |

位运算符"非"将所有的 32 位取反，而值的最高位（最左边的一位）为 1 则表示负数（2-补码表示法）。

## 移位运算符

移位运算符带两个操作数：第一个是待移位的数，第二个是指定第一个数要被移多少位的数。移位的方向由运算符来控制.

移位运算符把操作数转为 32bit 整数，然后得出一个与待移位数相同种类的值。

**移位运算符**

| 运算符         | 描述                                                                                               | 范例                                                                                                          |
| -------------- | -------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------- |
| 左移`<<`       | 将第一个操作数向左移动指定数量的位. 左边移出位被抛弃. 左边移出的几位被丢弃.右边多出的空位由 0 补齐 | `9<<2` 产生 36，因为 1001 移位 2 比特向左变为 `100100`，它是 36。                                             |
| 带符号右移`>>` | 将第一个操作数向右移动指定数量的位。右边移出位被抛弃。 左边多出的空位由原值的最左边数字补齐.       | `9>>2` 产生 2，因为 `1001` 移位 2 位向右变为 10，其是 2。同样，-9>>2 产生-3，由于符号被保留。                 |
| 带零右移`>>>`  | 将第一个操作数向右移动指定数量的位。右边移出位被抛弃。 左边多出的空位由 0 补齐。                   | `19>>>2` 产生 4，因为 `10011` 移位 2 位向右变为 `100`，它是 4。对非负数值，补零右移和带符号右移产生相同结果。 |
