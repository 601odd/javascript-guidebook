(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[268],{C5DQ:function(e,n,t){"use strict";t.r(n);var l=t("q1tI"),a=t.n(l),c=(t("B2uJ"),t("+su7"),t("qOys")),r=t.n(c);t("5Yjd");n["default"]=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"markdown"},a.a.createElement("h1",{id:"functionprototypecall"},a.a.createElement("a",{"aria-hidden":"true",href:"#functionprototypecall"},a.a.createElement("span",{className:"icon icon-link"})),"Function.prototype.call"),a.a.createElement("p",null,a.a.createElement("code",null,"Function.prototype.call")," \u65b9\u6cd5\u7528\u4e8e\u6307\u5b9a\u51fd\u6570\u8c03\u7528\u6307\u5411\u7684 ",a.a.createElement("code",null,"this")," \u6307\u9488\uff0c\u5e76\u5206\u522b\u63d0\u4f9b\u53c2\u6570\u4f5c\u4e3a\u6307\u5b9a\u51fd\u6570\u7684\u53c2\u6570\u3002"),a.a.createElement("h2",{id:"\u8bed\u6cd5"},a.a.createElement("a",{"aria-hidden":"true",href:"#\u8bed\u6cd5"},a.a.createElement("span",{className:"icon icon-link"})),"\u8bed\u6cd5"),a.a.createElement(r.a,{code:"Function.prototype.apply(thisArg, ...args)\n",lang:"js"}),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"\u53c2\u6570"),a.a.createElement("th",null,"\u8bf4\u660e"),a.a.createElement("th",null,"\u7c7b\u578b"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"thisArg"),a.a.createElement("td",null,"\u53ef\u9009\u53c2\u6570\u3002\u8c03\u7528\u51fd\u6570\u65f6\u6307\u5411\u7684 ",a.a.createElement("code",null,"this")," \u6307\u9488\u3002"),a.a.createElement("td",null)),a.a.createElement("tr",null,a.a.createElement("td",null,"args"),a.a.createElement("td",null,"\u53ef\u9009\u53c2\u6570\u3002\u8c03\u7528\u51fd\u6570\u53c2\u6570\u5217\u8868\u3002"),a.a.createElement("td",null)))),a.a.createElement("h2",{id:"\u793a\u4f8b"},a.a.createElement("a",{"aria-hidden":"true",href:"#\u793a\u4f8b"},a.a.createElement("span",{className:"icon icon-link"})),"\u793a\u4f8b"),a.a.createElement(r.a,{code:"function Product(name, price) {\n  this.name = name;\n  this.price = price;\n}\n\nfunction Food(name, price) {\n  Product.call(this, name, price);\n  this.category = 'food';\n}\n\nfunction Toy(name, price) {\n  Product.call(this, name, price);\n  this.category = 'toy';\n}\n\nconst cheese = new Food('cheese', 5);\nconst robot = new Toy('robot', 40);\n\nconsole.log(cheese);\n// {\n//   category: \"food\",\n//   name: \"cheese\",\n//   price: 5,\n// }\nconsole.log(robot);\n// {\n//   category: \"toy\",\n//   name: \"robot\",\n//   price: 40,\n// }\n",lang:"js"}),a.a.createElement("h2",{id:"polyfill"},a.a.createElement("a",{"aria-hidden":"true",href:"#polyfill"},a.a.createElement("span",{className:"icon icon-link"})),"Polyfill"),a.a.createElement("p",null,"\u529f\u80fd\u5206\u6790\uff1a"),a.a.createElement("ul",null,a.a.createElement("li",null,"\u6539\u53d8\u51fd\u6570\u4e2d ",a.a.createElement("code",null,"this")," \u7684\u6307\u5411"),a.a.createElement("li",null,"\u83b7\u53d6\u540e\u7eed\u53c2\u6570\u5e76\u6267\u884c")),a.a.createElement(r.a,{code:"Function.prototype.call = function(context) {\n  // context \u662f\u8c03\u7528 call \u7684\u65f6\u5019\u53c2\u6570\u4e2d\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\n\n  // \u5148\u5224\u65ad\u5f53\u524d\u7684\u8c03\u7528\u65b9\u662f\u4e0d\u662f\u4e00\u4e2a\u51fd\u6570\n  if (typeof this !== 'function') {\n    throw new TypeError('\u5f53\u524d\u8c03\u7528 call \u65b9\u6cd5\u7684\u4e0d\u662f\u51fd\u6570.')\n  }\n\n  // \u4fdd\u5b58\u8c03\u7528\u65b9\u7ed9\u7684\u53c2\u6570\n  const args = [...arguments].slice(1)\n\n  // \u786e\u5b9a\u6267\u884c\u65b9\u7684\u7c7b\u578b\uff0c\u56e0\u4e3a\u53ef\u4ee5\u4f20 null \u548c undefined\n  context = context || window;\n\n  // \u5c06\u8c03\u7528\u65b9\u7684\u5185\u5bb9\u4fdd\u5b58\u4e3a\u6267\u884c\u65b9\u7684\u4e00\u4e2a\u5c5e\u6027\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u4e0d\u4e0e\u6267\u884c\u65b9\u4e2d\u7684 key \u952e\u540d\u91cd\u590d\n  const fn = Symbol('fn')\n\n  context[fn] = this;\n\n  // \u6267\u884c\u4fdd\u5b58\u7684\u51fd\u6570\uff0c\u8fd9\u4e2a\u65f6\u5019\u4f5c\u7528\u57df\u5c31\u662f\u5728\u8c03\u7528\u65b9\u7684\u5bf9\u8c61\u7684\u4f5c\u7528\u57df\u4e0b\u6267\u884c\uff0c\u6539\u53d8 this \u7684\u6307\u5411\n  const result = context[fn](...args)\n\n  // \u6267\u884c\u5b8c\u5220\u9664\u521a\u624d\u65b0\u589e\u7684\u5c5e\u6027\u503c\n  delete context[fn]\n\n  // \u8fd4\u56de\u6267\u884c\u7ed3\u679c\n  return result\n}\n",lang:"js"}),a.a.createElement("p",null,"\u7531\u4e8e ",a.a.createElement("code",null,"call")," \u548c ",a.a.createElement("code",null,"apply")," \u7684\u533a\u522b\u5c31\u5728\u4e8e\u4f20\u53c2\u7684\u65b9\u5f0f\u4e0d\u540c\uff1a"),a.a.createElement(r.a,{code:"fn.call(ctx, arg1, arg2, arg3)\nfn.call(ctx, [arg1, arg2, arg3])\n",lang:"js"}),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("code",null,"call")," \u8c03\u7528\u51fd\u6570\u7684\u53c2\u6570\u662f\u6563\u5217\u7684\u5f62\u5f0f"),a.a.createElement("li",null,a.a.createElement("code",null,"apply")," \u8c03\u7528\u51fd\u6570\u7684\u53c2\u6570\u662f\u6570\u7ec4\u7684\u5f62\u5f0f"))))}}}]);