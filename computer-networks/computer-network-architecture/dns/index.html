<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/javascript-guidebook/umi.b538b811.css" />
    <script>
      window.routerBase = "/javascript-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.7
    </script>
    <title>DNS &#x57DF;&#x540D;&#x89E3;&#x6790;&#x534F;&#x8BAE;</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/javascript-guidebook-favicon.png&#x27;)" href="/javascript-guidebook//">JavaScript Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/javascript-guidebook//basic-concept">基本语法</a><a href="/javascript-guidebook//standard-built-in-objects">内置对象</a><a href="/javascript-guidebook//core-modules">核心模块</a><a href="/javascript-guidebook//object-oriented-programming">OOP</a><a href="/javascript-guidebook//browser-object-model">BOM</a><a href="/javascript-guidebook//document-object-model">DOM</a><a aria-current="page" class="active" href="/javascript-guidebook//computer-networks">计算机网络</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/javascript-guidebook-favicon.png&#x27;)" href="/javascript-guidebook//"></a><h1>JavaScript Guidebook</h1><p>JavaScript 完全知识体系</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/javascript-guidebook//basic-concept">基本语法</a></li><li><a href="/javascript-guidebook//standard-built-in-objects">内置对象</a></li><li><a href="/javascript-guidebook//core-modules">核心模块</a></li><li><a href="/javascript-guidebook//object-oriented-programming">OOP</a></li><li><a href="/javascript-guidebook//browser-object-model">BOM</a></li><li><a href="/javascript-guidebook//document-object-model">DOM</a></li><li><a aria-current="page" class="active" href="/javascript-guidebook//computer-networks">计算机网络</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/javascript-guidebook//computer-networks">计算机网络</a></li><li><a aria-current="page" class="active" href="/javascript-guidebook//computer-networks/computer-network-architecture">计算机网络体系</a><ul><li><a href="/javascript-guidebook//computer-networks/computer-network-architecture/computer-networks"><span>计算机网络体系</span></a></li><li><a href="/javascript-guidebook//computer-networks/computer-network-architecture/transport-layer-protocol"><span>传输层协议</span></a></li><li><a href="/javascript-guidebook//computer-networks/computer-network-architecture/network-layer-protocol"><span>网络层协议</span></a></li><li><a aria-current="page" class="active" href="/javascript-guidebook//computer-networks/computer-network-architecture/dns"><span>DNS 域名解析协议</span></a></li><li><a href="/javascript-guidebook//computer-networks/computer-network-architecture/cdn"><span>CDN 内容分发网络</span></a></li></ul></li><li><a href="/javascript-guidebook//computer-networks/http">HTTP</a><ul><li><a href="/javascript-guidebook//computer-networks/http/http"><span>HTTP</span></a></li><li><a href="/javascript-guidebook//computer-networks/http/https"><span>HTTPS</span></a></li><li><a href="/javascript-guidebook//computer-networks/http/headers"><span>HTTP 首部字段</span></a></li><li><a href="/javascript-guidebook//computer-networks/http/request-methods"><span>HTTP 请求方法</span></a></li><li><a href="/javascript-guidebook//computer-networks/http/response-status-codes"><span>HTTP 状态码</span></a></li><li><a href="/javascript-guidebook//computer-networks/http/access-control"><span>HTTP 跨域资源共享</span></a></li><li><a href="/javascript-guidebook//computer-networks/http/authentication"><span>HTTP 身份校验</span></a></li><li><a href="/javascript-guidebook//computer-networks/http/http2"><span>HTTP2</span></a></li><li><a href="/javascript-guidebook//computer-networks/http/http3"><span>HTTP3</span></a></li></ul></li><li><a href="/javascript-guidebook//computer-networks/frontend-security">Web 安全</a><ul><li><a href="/javascript-guidebook//computer-networks/frontend-security/xss"><span>XSS 攻击</span></a></li><li><a href="/javascript-guidebook//computer-networks/frontend-security/csrf"><span>CSRF 攻击</span></a></li><li><a href="/javascript-guidebook//computer-networks/frontend-security/ddos"><span>DDoS 攻击</span></a></li><li><a href="/javascript-guidebook//computer-networks/frontend-security/sql-injection"><span>SQL 注入攻击</span></a></li><li><a href="/javascript-guidebook//computer-networks/frontend-security/hijacking"><span>流量劫持</span></a></li><li><a href="/javascript-guidebook//computer-networks/frontend-security/same-origin-policy"><span>同源策略</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="DNS 系统" data-depth="2" class=""><a href="/javascript-guidebook//computer-networks/computer-network-architecture/dns#dns-系统"><span>DNS 系统</span></a></li><li title="DNS 域名结构" data-depth="2" class=""><a href="/javascript-guidebook//computer-networks/computer-network-architecture/dns#dns-域名结构"><span>DNS 域名结构</span></a></li><li title="域名的层次结构" data-depth="3" class=""><a href="/javascript-guidebook//computer-networks/computer-network-architecture/dns#域名的层次结构"><span>域名的层次结构</span></a></li><li title="域名的分级" data-depth="3" class=""><a href="/javascript-guidebook//computer-networks/computer-network-architecture/dns#域名的分级"><span>域名的分级</span></a></li><li title="域名服务器" data-depth="2" class=""><a href="/javascript-guidebook//computer-networks/computer-network-architecture/dns#域名服务器"><span>域名服务器</span></a></li><li title="域名解析过程" data-depth="2" class=""><a href="/javascript-guidebook//computer-networks/computer-network-architecture/dns#域名解析过程"><span>域名解析过程</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="dns-域名解析协议"><a aria-hidden="true" href="#dns-域名解析协议"><span class="icon icon-link"></span></a>DNS 域名解析协议</h1><p>DNS（DomainNameSystem）系统用于命名阻止到域层次结构中的计算机和网络服务。</p><p>使用 IP 地址而非使用域名进行通信的原因：</p><ul><li>IP 地址是固定长度，IPv4 是 32 位，IPv6 是 128 位，而域名是变长的，不便于计算机处理</li><li>IP 地址对于用户来说不方便记忆，但域名便于用户使用</li></ul><p>总结来说就是 IP 面向主机，域名面向用户。</p><p>⛳️ <strong><em>hosts</em></strong></p><p>域名和 IP 的对应关系保存在一个叫 hosts 文件中。</p><h2 id="dns-系统"><a aria-hidden="true" href="#dns-系统"><span class="icon icon-link"></span></a>DNS 系统</h2><ol><li>一个组织的系统管理机构，维护系统内的每个主机的 IP 和主机名的对应关系</li><li>如果新计算机接入网络，将这个信息注册到数据库中</li><li>用户输入域名的时候，会自动查询 DNS 服务器，由 DNS 服务器检索数据库，得到对应的 IP 地址 我们可以通过命令查看自己的 <code>hosts</code> 文件</li></ol><p>在域名解析的过程中仍然会优先查找 hosts 文件的内容。</p><h2 id="dns-域名结构"><a aria-hidden="true" href="#dns-域名结构"><span class="icon icon-link"></span></a>DNS 域名结构</h2><h3 id="域名的层次结构"><a aria-hidden="true" href="#域名的层次结构"><span class="icon icon-link"></span></a>域名的层次结构</h3><p><strong>域名系统必须要保持唯一性。</strong></p><ol><li>每个域名都是一个标号序列，用字母（大小写等价）、数字（0-9）和连接符（-）组成</li><li>标号序列总长度不能超过 255 个字符，它由点号分割成一个个的标号</li><li>每个标号应该在 63 个字符之内，每个标号都可以堪称一个层次的域名</li><li>级别最低的域名写在左边，级别最高的域名写在右边</li></ol><p>域名服务是基于 UDP 实现的，服务器的端口号为 53。</p><p>🌰 例如：</p><p><code>www.google.com</code></p><ul><li><code>com</code> 一级域名，表示这是个企业域名</li><li><code>google</code> 二级域名，表示公司名</li><li><code>www</code> 万维网</li></ul><h3 id="域名的分级"><a aria-hidden="true" href="#域名的分级"><span class="icon icon-link"></span></a>域名的分级</h3><p>域名可以划分为各个子域，子域还可以继续划分为子域的子域，这样就形成了顶级域、二级域、三级域等。</p><table><thead><tr><th>顶级域名</th><th>标识</th></tr></thead><tbody><tr><td>国家顶级域名</td><td>中国 <code>cn</code>；美国 <code>us</code>；英国 <code>uk</code></td></tr><tr><td>通用顶级域名</td><td>公司企业 <code>com</code>；教育机构 <code>edu</code>；政府部门 <code>gov</code>；国际组织 <code>int</code>；军事部门 <code>mil</code>；网络 <code>net</code>；非盈利组织 <code>org</code></td></tr><tr><td>反向域名</td><td>arpa 用于 PTR 查询（IP 地址转换为域名）</td></tr></tbody></table><h2 id="域名服务器"><a aria-hidden="true" href="#域名服务器"><span class="icon icon-link"></span></a>域名服务器</h2><p>域名是分层结构，域名服务器也是对应的层级结构。</p><p>域名服务器 =&gt; 装有域名系统的主机</p><p>由高到低进行层次划分。</p><table><thead><tr><th>分类</th><th>作用</th></tr></thead><tbody><tr><td>根域名服务器</td><td>最高层次的域名服务器，本地域名服务器解析不了的域名就会向其求助</td></tr><tr><td>顶级域名服务器</td><td>负责管理在该顶级域名服务器下注册的耳机线域名</td></tr><tr><td>权限域名服务器</td><td>负责一个区的域名解析工作</td></tr><tr><td>本地域名服务器</td><td>当一个主机发出 DNS 查询请求时，这个查询请求首先发给本地域名服务器</td></tr></tbody></table><p>⚠️ 一个域名服务器所负责的范围，或者说有管理权限的范围，就称为区。</p><blockquote><ol><li>每个层的域名上都有自己的域名服务器，最顶层的是根域名服务器</li><li>每一级域名服务器都知道下级域名服务器的 IP 地址</li><li>为了容灾, 每一级至少设置两个或以上的域名服务器</li></ol></blockquote><h2 id="域名解析过程"><a aria-hidden="true" href="#域名解析过程"><span class="icon icon-link"></span></a>域名解析过程</h2><p>DNS 是一种实用 UDP 协议进行域名查询的协议，其最主要的目标就是将域名转换为 IP 地址。</p><p>以查询 <code>www.meituan.com</code> 对应的 IP 地址为例，操作系统首先会在本地尝试解析，比如使用众所周知的 <code>hosts</code> 文件，同时如果有解析缓存的话，操作系统也会去查询。如果是在浏览器中进行查询，浏览器自己有时也会有解析缓存。</p><ul><li>用户设备<ul><li>浏览器可能会缓存域名解析</li><li>用户系统中可以有自己的域名映射表</li></ul></li><li>公共域名服务器<ul><li>通常由 ISP 提供</li><li>缓存上一级域名服务器的结果</li></ul></li></ul><p>在查询没有结果时，设备最终会开始向域名服务器发起查询请求。公共域名服务器一般就是用户的 ISP 提供的。这种公共域名服务器通常会缓存查询结果，因此如果缓存命中，查询就可以到此结束。当然缓存本身是有时效的，这个时效就被称为 TTL。对于超过时效的查询结果，域名服务器有义务重新发起查询请求。但查询本身是非常消耗流量的事情，因此也有一些公共服务器不严格遵守 TTL，超时缓存。</p><p>未命名缓存的查询，公共服务器会向顶级域名服务器进行查询。以上述例子来说，因为公共域名服务器不知道 <code>meituan.com</code> 的解析权归谁，因此它会向顶级域名服务器——<code>com</code> 域名服务器发起请求，寻找 <code>meituan.com</code> 对应的域名服务器。顶级域名服务器一般是由域名经营机构来维护的，有些甚至归属国家机关管理，例如国别域名。理论上来说，在顶级域名服务器之上还有一个根域名服务器，不过在平时很难意识到它的存在。</p><ul><li>公共域名服务器<ul><li>DNS 级联的特性决定了中途可以有更多域名服务器</li></ul></li><li>顶级域名服务器<ul><li>由顶级域名经营机构维护</li><li>可细分为与国家、通用</li></ul></li></ul><p>在查找到 <code>meituan.com</code> 的域名服务器之后，就可以向域名服务器查询 <code>www.meituan.com</code> 的 IP 了。这个过程是由上到下指定下来的，所以这种域名服务器可以被称为权威域名服务器。对于开发者来说，我们自己平时在域名服务器那里购买到域名之后，录入自己域名对应的 IP，其实就是在向权威域名服务器录入信息。一些大型企业会自己维护权威域名服务器，这样既可以抵御一些针对性的攻击，同时也可以更好地优化解析的速度。</p><ul><li>公共域名服务器</li><li>权威域名服务器<ul><li>通常由专业的域名服务机构提供</li><li>购买域名时一般会提供</li></ul></li></ul><p><strong>解析步骤：</strong></p><ol><li>主机先向本地域名服务器进行递归查询</li><li>本地域名服务器采用迭代查询，向一个根域名服务器进行查询</li><li>根域名服务器告诉本地域名服务器，下一次应该查询的顶级域名服务器的 IP 地址</li><li>本地域名服务器向顶级域名服务器进行查询</li><li>顶级域名服务器告诉本地域名服务器，下一步查询权限服务器的 IP 地址</li><li>本地域名服务器向权限服务器进行查询</li><li>权限服务器告诉本地域名服务器所查询的主机的 IP 地址</li><li>本地域名服务器最后把查询结果告诉主机</li></ol><hr/><p><strong>参考资料：</strong></p><ul><li><a href="https://blog.csdn.net/baidu_37964071/article/details/80500825" target="_blank" rel="noopener noreferrer">DNS（域名解析协议）详解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://www.tuicool.com/articles/V7JN32Z" target="_blank" rel="noopener noreferrer">从输入 URL 到页面加载完成的过程中都发生了什么<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><ul><li><a href="https://www.cnblogs.com/coco1s/p/5365179.html" target="_blank" rel="noopener noreferrer">前端性能：浅谈域名发散与域名收敛<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://segmentfault.com/a/1190000004641599" target="_blank" rel="noopener noreferrer">域名收敛：前端优化<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://www.cnblogs.com/zhangchengye/p/5368398.html" target="_blank" rel="noopener noreferrer">DNS解析过程与域名收敛、域名发散、SPDY应用<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook/edit/master/docs/computer-networks/computer-network-architecture/dns.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">7/4/2020, 7:57:06 AM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/javascript-guidebook/umi.44dec3af.js"></script>
    <script src="/javascript-guidebook/docs__computer-networks__computer-network-architecture__dns.md.1b6e0e9e.async.js"></script>
  </body>
</html>
