(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[198],{"7lWm":function(e,t,l){"use strict";l.r(t);var n=l("q1tI"),a=l.n(n),r=(l("B2uJ"),l("+su7"),l("qOys")),c=l.n(r);l("5Yjd");t["default"]=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"markdown"},a.a.createElement("h2",{id:"\u5730\u7406\u5b9a\u4f4d"},a.a.createElement("a",{"aria-hidden":"true",href:"#\u5730\u7406\u5b9a\u4f4d"},a.a.createElement("span",{className:"icon icon-link"})),"\u5730\u7406\u5b9a\u4f4d"),a.a.createElement("p",null,"\u6839\u636e\u7528\u6237\u7684\u5730\u7406\u4f4d\u7f6e\u63d0\u4f9b\u76f8\u5173\u5730\u533a\u670d\u52a1\uff0c\u5df2\u7ecf\u662f\u975e\u5e38\u666e\u904d\u7684\u4e00\u9879\u529f\u80fd\uff0c\u4f8b\u5982\u672c\u5730\u751f\u6d3b\u670d\u52a1\u7c7b\u7f51\u7ad9\u3001\u5916\u5356\u7f51\u7ad9\u7b49\u3002HTML5 \u65b0\u529f\u80fd\u4e2d\u63d0\u4f9b\u4e86\u83b7\u53d6\u7528\u6237\u4f4d\u7f6e\u7684\u80fd\u529b\u3002"),a.a.createElement("p",null,"\u5404\u4e3b\u8981\u6d4f\u89c8\u5668\u5bf9 HTML5 Geolocation API \u7684\u652f\u6301\u60c5\u51b5\uff1a"),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"\u6d4f\u89c8\u5668"),a.a.createElement("th",null,"\u7248\u672c"),a.a.createElement("th",null,"\u53ea\u652f\u6301HTTPS\u7248\u672c"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"IE"),a.a.createElement("td",null,"9+"),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"Edge"),a.a.createElement("td",null,"12+"),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"Firefox"),a.a.createElement("td",null,"3.5+"),a.a.createElement("td",null,"-")),a.a.createElement("tr",null,a.a.createElement("td",null,"Chrome"),a.a.createElement("td",null,"5+"),a.a.createElement("td",null,"50+")),a.a.createElement("tr",null,a.a.createElement("td",null,"Safari"),a.a.createElement("td",null,"5+"),a.a.createElement("td",null,"39+")),a.a.createElement("tr",null,a.a.createElement("td",null,"iOS Safari"),a.a.createElement("td",null,"3.2+"),a.a.createElement("td",null,"10.2+")),a.a.createElement("tr",null,a.a.createElement("td",null,"Android Browser"),a.a.createElement("td",null,"2.1+"),a.a.createElement("td",null,"56+")),a.a.createElement("tr",null,a.a.createElement("td",null,"Chrome for Android"),a.a.createElement("td",null,"57+"),a.a.createElement("td",null,"57+")),a.a.createElement("tr",null,a.a.createElement("td",null,"UC Browser for Android"),a.a.createElement("td",null,"11.4+"),a.a.createElement("td",null,"-")))),a.a.createElement("p",null,"\u6ce8\u610f\uff1a\u5904\u4e8e\u5b89\u5168\u8003\u8651\uff0c\u90e8\u5206\u6700\u65b0\u7684\u6d4f\u89c8\u5668\u7684\u6d4f\u89c8\u5668\u53ea\u5141\u8bb8\u901a\u8fc7 HTTPS \u534f\u8bae\u4f7f\u7528 Geolocation API\u3002\u5728 HTTPS \u534f\u8bae\u4e0b\u4f7f\u7528 Geolocation API\uff0c\u6d4f\u89c8\u5668\u4f1a\u629b\u51fa\u5f02\u5e38\u3002\u5728\u5f00\u53d1\u9636\u6bb5\uff0c127.0.0.1 \u548c localhost \u7b49\u672c\u5730\u57df\u5728\u4e24\u79cd\u534f\u8bae\u4e0b\u5747\u53ef\u4ee5\u4f7f\u7528\u3002"),a.a.createElement("p",null,"Geolocation API \u901a\u8fc7 ",a.a.createElement("code",null,"navigator.geolocation")," \u5168\u5c40\u5bf9\u8c61\u8fdb\u884c\u8bbf\u95ee\u3002\u521d\u6b21\u8bbf\u95ee\u65f6\uff0c\u6d4f\u89c8\u5668\u4f1a\u8be2\u95ee\u7528\u6237\u662f\u5426\u5141\u8bb8\u5171\u4eab\u4f4d\u7f6e\uff0c\u82e5\u7528\u6237\u9009\u62e9\u5141\u8bb8\u5219\u7a0b\u5e8f\u83b7\u5f97\u4f7f\u7528 Geolocation API \u6743\u9650\u3002\u5224\u65ad\u6d4f\u89c8\u5668\u662f\u5426\u5b58\u5728 ",a.a.createElement("code",null,"navigator.geolocation")," \u5bf9\u8c61\u6765\u5f97\u77e5\u3002"),a.a.createElement(c.a,{code:"if (navigator.geolocation){\n    // \u83b7\u53d6\u5730\u7406\u4f4d\u7f6e\n} else {\n    alert('\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301Geolocation!');\n}\n",lang:"js"}),a.a.createElement("p",null,"\u83b7\u53d6\u7528\u6237\u7684\u5f53\u524d\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u8c03\u7528 ",a.a.createElement("code",null,"navigator.geolocation")," \u7684 ",a.a.createElement("code",null,"getCurrentPosition")," \u65b9\u6cd5\u3002"),a.a.createElement(c.a,{code:"if (navigator.geolocation){\n    navigator.geolocation.getCurrentPosition(\n        function success(position)(){\n            console.log('\u83b7\u53d6\u4f4d\u7f6e\u6210\u529f:', position.coords);\n        },\n        function error(positionError){\n            console.log('\u83b7\u53d6\u4f4d\u7f6e\u5931\u8d25:', positionError.code,\n                        positionError.message);\n\n        },\n        {\n            enableHightAccuracy: false,\n            timeout: 30000,\n            maximumAge: 0\n        }\n    )\n} else {\n    alert('\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301Geolocation!');\n}\n",lang:"js"}),a.a.createElement("p",null,"\u6210\u529f\u83b7\u53d6\u4f4d\u7f6e\u540e\uff0c\u4f1a\u8c03\u7528\u56de\u8c03\u51fd\u6570 ",a.a.createElement("code",null,"success"),"\u3002\u8fd4\u56de\u53c2\u6570 ",a.a.createElement("code",null,"position")," \u5bf9\u8c61\u5305\u542b\u83b7\u53d6\u4f4d\u7f6e\u65f6\u7684\u65f6\u95f4\u6233 ",a.a.createElement("code",null,"timestamp")," \u548c\u5750\u6807\u4fe1\u606f ",a.a.createElement("code",null,"coords"),"\u3002",a.a.createElement("code",null,"coords")," \u5bf9\u8c61\u5305\u542b\u4e86\u5f88\u591a\u6709\u7528\u7684\u4f4d\u7f6e\u6570\u636e\u4fe1\u606f\uff0c\u5217\u4e3e\u51e0\u4e2a\u5e38\u7528\u7684\u5c5e\u6027\uff1a"),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"\u5c5e\u6027"),a.a.createElement("th",null,"\u8bf4\u660e"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"latitude"),a.a.createElement("td",null,"\u5750\u6807\u7eac\u5ea6")),a.a.createElement("tr",null,a.a.createElement("td",null,"longitude"),a.a.createElement("td",null,"\u5750\u6807\u7ecf\u5ea6")),a.a.createElement("tr",null,a.a.createElement("td",null,"accuracy"),a.a.createElement("td",null,"\u5750\u6807\u7cbe\u5ea6\uff0c\u5355\u4f4d\u4e3a\u7c73")))),a.a.createElement("p",null,"\u5f53\u83b7\u53d6\u4f4d\u7f6e\u5931\u8d25\u65f6\uff0c\u4f1a\u8c03\u7528\u56de\u8c03\u51fd\u6570 ",a.a.createElement("code",null,"error"),"\u3002\u8fd4\u56de\u7684\u53c2\u6570 ",a.a.createElement("code",null,"positionError")," \u7684 ",a.a.createElement("code",null,"message")," \u5c5e\u6027\u5305\u542b\u4e86\u76f8\u5173\u7684\u9519\u8bef\u4fe1\u606f\u63cf\u8ff0\uff0c",a.a.createElement("code",null,"positionError.code")," \u6807\u8bc6\u9519\u8bef\u7684\u539f\u56e0\uff0c",a.a.createElement("code",null,"positionError.code")," \u7684\u503c\u6709\u4ee5\u4e0b\u51e0\u79cd\u3002"),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"\u5c5e\u6027"),a.a.createElement("th",null,"\u8bf4\u660e"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("code",null,"UNKNOWN_ERROR(0)")),a.a.createElement("td",null,"\u5176\u4ed6\u9519\u8bef")),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("code",null,"PERMISSION_DENIED(1)")),a.a.createElement("td",null,"\u7528\u6237\u62d2\u7edd\u5206\u4eab\u4f4d\u7f6e\u4fe1\u606f")),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("code",null,"POSITION_UNAVAILABLE(3)")),a.a.createElement("td",null,"\u83b7\u53d6\u7528\u6237\u4f4d\u7f6e\u4fe1\u606f\u5931\u8d25")),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("code",null,"TIMEOUT(3)")),a.a.createElement("td",null,"\u83b7\u53d6\u7528\u6237\u4f4d\u7f6e\u4fe1\u606f\u8d85\u65f6")))),a.a.createElement("p",null,a.a.createElement("code",null,"gerCurrentPosition")," \u65b9\u6cd5\u7684\u53c2\u6570 ",a.a.createElement("code",null,"options")," \u53ef\u4ee5\u8bbe\u7f6e\u4ee5\u4e0b\u5185\u5bb9\u3002"),a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"\u5c5e\u6027"),a.a.createElement("th",null,"\u8bf4\u660e"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"enableHighAccuray"),a.a.createElement("td",null,"\u5e03\u5c14\u503c\uff0c\u662f\u5426\u83b7\u53d6\u9ad8\u7cbe\u5ea6\u7684\u4f4d\u7f6e\u4fe1\u606f\uff0c\u5982\u679c\u5f00\u542f\uff0c\u53ef\u80fd\u4f1a\u589e\u52a0\u54cd\u5e94\u65f6\u95f4\uff0c\u9ed8\u8ba4\u503c\u4e3a ",a.a.createElement("code",null,"false"))),a.a.createElement("tr",null,a.a.createElement("td",null,"timeout"),a.a.createElement("td",null,"\u5b9a\u4f4d\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u6beb\u79d2\uff0c\u5982\u5230\u8fbe\u65f6\u95f4\u65f6\u6ca1\u6709\u53d6\u5f97\u7528\u6237\u4f4d\u7f6e\u4fe1\u606f\uff0c\u5219\u89e6\u53d1\u5931\u8d25\u56de\u8c03\u51fd\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a0\uff0c\u8868\u793a\u65e0\u9650\u5927")),a.a.createElement("tr",null,a.a.createElement("td",null,"maximumAge"),a.a.createElement("td",null,"\u7528\u6237\u4f4d\u7f6e\u4fe1\u606f\u7f13\u5b58\u7684\u6700\u5927\u65f6\u95f4\uff08\u5355\u4f4d\u4e3a\u6beb\u79d2\uff09\uff0c\u9ed8\u8ba4\u503c\u4e3a 0")))),a.a.createElement("p",null,"\u5f53\u7528\u6237\u4f4d\u7f6e\u53d8\u5316\u65f6\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7 ",a.a.createElement("code",null,"watchPosition")," \u65b9\u6cd5\u76d1\u542c\u7528\u6237\u7684\u4f4d\u7f6e\u4fe1\u606f\uff0c",a.a.createElement("code",null,"watchPosition")," \u7684\u53c2\u6570\u548c ",a.a.createElement("code",null,"getCurrentPosition")," \u76f8\u540c\u3002\u51fd\u6570\u6267\u884c\u540e\u8fd4\u56de\u4e00\u4e2a\u552f\u4e00\u6807\u8bc6\uff0c\u53ef\u4ee5\u4f7f\u7528 ",a.a.createElement("code",null,"clearWatch")," \u65b9\u6cd5\u6765\u53d6\u6d88\u76d1\u542c\u3002"),a.a.createElement(c.a,{code:"const watchId = navigator.geolocation.watchPosition(success, error, options);\nnavigator.geolocation.clearWatch(watchId);\n",lang:"js"})))}}}]);