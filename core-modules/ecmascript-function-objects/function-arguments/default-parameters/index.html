<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/javascript-guidebook/umi.b538b811.css" />
    <script>
      window.routerBase = "/javascript-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.3
    </script>
    <title>&#x9ED8;&#x8BA4;&#x53C2;&#x6570;</title>
  
<script>
      window.g_useSSR = true;
      window.g_initialProps = {};

    </script>
    </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/javascript-guidebook-favicon.png&#x27;)" href="/javascript-guidebook//">JavaScript Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/javascript-guidebook//basic-concept">基本语法</a><a href="/javascript-guidebook//standard-built-in-objects">内置对象</a><a aria-current="page" class="active" href="/javascript-guidebook//core-modules">核心模块</a><a href="/javascript-guidebook//object-oriented-programming">OOP</a><a href="/javascript-guidebook//browser-object-model">BOM</a><a href="/javascript-guidebook//document-object-model">DOM</a><a href="/javascript-guidebook//html5-scripting-programming">HTML5</a><a href="/javascript-guidebook//computer-networks">计算机网络</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/javascript-guidebook-favicon.png&#x27;)" href="/javascript-guidebook//"></a><h1>JavaScript Guidebook</h1><p>JavaScript 完全知识体系</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/javascript-guidebook//basic-concept">基本语法</a></li><li><a href="/javascript-guidebook//standard-built-in-objects">内置对象</a></li><li><a aria-current="page" class="active" href="/javascript-guidebook//core-modules">核心模块</a></li><li><a href="/javascript-guidebook//object-oriented-programming">OOP</a></li><li><a href="/javascript-guidebook//browser-object-model">BOM</a></li><li><a href="/javascript-guidebook//document-object-model">DOM</a></li><li><a href="/javascript-guidebook//html5-scripting-programming">HTML5</a></li><li><a href="/javascript-guidebook//computer-networks">计算机网络</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/javascript-guidebook//core-modules">核心模块</a></li><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/compilation">编译阶段</a><ul><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/compilation/compilation"><span>编译阶段</span></a></li><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/compilation/lexical-scope"><span>词法作用域</span></a></li><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/compilation/function-as-scopes"><span>函数作用域</span></a></li><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/compilation/blocks-as-scopes"><span>块作用域</span></a></li><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/compilation/hoisting"><span>声明提升</span></a></li><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/compilation/closures"><span>闭包</span></a></li></ul></li><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/execution">执行阶段</a><ul><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/execution/execution-context-stack"><span>执行上下文</span></a></li><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/execution/variable-object"><span>变量对象</span></a></li><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/execution/scope-chain"><span>作用域链</span></a></li><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/execution/this"><span>this</span></a></li></ul></li><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/memory-management">内存管理</a><ul><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/memory-management/memory-model"><span>内存模型</span></a></li><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/memory-management/memory-life-cycle"><span>内存生命周期</span></a></li><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/memory-management/garbage-collection"><span>垃圾回收</span></a></li></ul></li><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/concurrency-model">并发模型</a><ul><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/concurrency-model/concurrency-model"><span>并发模型</span></a></li><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/concurrency-model/event-loop"><span>事件循环</span></a></li><li><a href="/javascript-guidebook//core-modules/executable-code-and-execution-contexts/concurrency-model/timers-mechanism"><span>定时器机制</span></a></li></ul></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-declarations">函数声明</a><ul><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-declarations/function-definitions"><span>函数声明定义</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-declarations/arrow-function-definitions"><span>箭头函数</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-declarations/async-function-definitions"><span>Async 函数</span></a></li></ul></li><li><a aria-current="page" class="active" href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-arguments">函数参数</a><ul><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-arguments/function-parameters"><span>函数参数</span></a></li><li><a aria-current="page" class="active" href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-arguments/default-parameters"><span>默认参数</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-arguments/rest-parameters"><span>剩余参数</span></a></li></ul></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-calls">函数调用</a><ul><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-calls/method-invocation-pattern"><span>方法调用模式</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-calls/function-invocation-pattern"><span>函数调用模式</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-calls/constructor-invocation-pattern"><span>构造函数调用模式</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-calls/apply-invocation-pattern"><span>间接调用模式</span></a></li></ul></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-internal">函数内部</a><ul><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-internal/function-accessor"><span>函数存取器</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-internal/function-prototype-object-methods"><span>函数原型对象方法</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-internal/function-prototype-object-properties"><span>函数原型对象属性</span></a></li></ul></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-types">函数类型</a><ul><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-types/structure-function"><span>构造函数</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-types/class-structure-function"><span>类构造函数</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-types/lazy-function"><span>惰性函数</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-types/cascade-function"><span>级联函数</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-types/callback-function"><span>回调函数</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-types/hight-order-function"><span>高阶函数</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-types/function-currying"><span>函数柯里化</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-types/throttle"><span>函数节流</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-types/debounce"><span>函数防抖</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-types/memorize-function"><span>函数记忆</span></a></li><li><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-types/partial-function"><span>偏函数</span></a></li></ul></li><li><a href="/javascript-guidebook//core-modules/modularization">模块化</a><ul><li><a href="/javascript-guidebook//core-modules/modularization/modularization"><span>模块化</span></a></li><li><a href="/javascript-guidebook//core-modules/modularization/import"><span>import</span></a></li><li><a href="/javascript-guidebook//core-modules/modularization/export"><span>export</span></a></li><li><a href="/javascript-guidebook//core-modules/modularization/compound"><span>复合写法</span></a></li><li><a href="/javascript-guidebook//core-modules/modularization/module-inheritance"><span>模块的继承</span></a></li><li><a href="/javascript-guidebook//core-modules/modularization/cross-module-constant"><span>跨模块常量</span></a></li><li><a href="/javascript-guidebook//core-modules/modularization/dynamic-import"><span>动态加载</span></a></li><li><a href="/javascript-guidebook//core-modules/modularization/module"><span>模块</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="传统用法" data-depth="2" class=""><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-arguments/default-parameters#传统用法"><span>传统用法</span></a></li><li title="基本用法" data-depth="2" class=""><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-arguments/default-parameters#基本用法"><span>基本用法</span></a></li><li title="默认声明" data-depth="3" class=""><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-arguments/default-parameters#默认声明"><span>默认声明</span></a></li><li title="参数不同名" data-depth="3" class=""><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-arguments/default-parameters#参数不同名"><span>参数不同名</span></a></li><li title="惰性求值" data-depth="3" class=""><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-arguments/default-parameters#惰性求值"><span>惰性求值</span></a></li><li title="与解构赋值结合使用" data-depth="2" class=""><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-arguments/default-parameters#与解构赋值结合使用"><span>与解构赋值结合使用</span></a></li><li title="结合案例分析" data-depth="3" class=""><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-arguments/default-parameters#结合案例分析"><span>结合案例分析</span></a></li><li title="参数默认值的位置" data-depth="2" class=""><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-arguments/default-parameters#参数默认值的位置"><span>参数默认值的位置</span></a></li><li title="函数的 length 属性" data-depth="2" class=""><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-arguments/default-parameters#函数的-length-属性"><span>函数的 length 属性</span></a></li><li title="作用域" data-depth="2" class=""><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-arguments/default-parameters#作用域"><span>作用域</span></a></li><li title="抛弃 arguments" data-depth="2" class=""><a href="/javascript-guidebook//core-modules/ecmascript-function-objects/function-arguments/default-parameters#抛弃-arguments"><span>抛弃 arguments</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="默认参数"><a aria-hidden="true" href="#默认参数"><span class="icon icon-link"></span></a>默认参数</h1><p>通常来说，函数调用者不需要传递所有可能存在的参数，没有被传递的参数可由感知到的默认参数进行填充。JavaScript 有严格的默认参数格式，未被传值的参数默认为 <code>undefined</code>。ES6 引入了一种新方式，可以指定任意参数的默认值。</p><h2 id="传统用法"><a aria-hidden="true" href="#传统用法"><span class="icon icon-link"></span></a>传统用法</h2><p>JavaScript 函数参数的默认值都是<code>undefined</code>， ES5 里，不支持直接在形参里写默认值。所以，要设置默认值，就要检测参数是否为<code>undefined</code>，按需求赋值。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function foo(x, y) {
    y = y || &#x27;World&#x27;;
    console.log(x, y);
}

foo(&#x27;Hello&#x27;);           // Hello World
foo(&#x27;Hello&#x27;, &#x27;China&#x27;);  // Hello China
foo(&#x27;Hello&#x27;, &#x27;&#x27;);       // Hello World
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token parameter punctuation">,</span><span class="token parameter"> y</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    y </span><span class="token operator">=</span><span class="token plain"> y </span><span class="token operator">||</span><span class="token plain"> </span><span class="token string">&#x27;World&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">x</span><span class="token punctuation">,</span><span class="token plain"> y</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token string">&#x27;Hello&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">           </span><span class="token comment">// Hello World</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token string">&#x27;Hello&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;China&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">  </span><span class="token comment">// Hello China</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token string">&#x27;Hello&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">       </span><span class="token comment">// Hello World</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>缺点：如果参数 <code>y</code> 赋值了，但是对应的布尔值为 <code>false</code>，则该赋值不起作用。</p><p>为了避免这个问题，我们需要先判断参数 <code>y</code> 是否被赋值，如果没有，再等于默认值。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function foo(x, y) {
    y = typeof y === undefined ? y || &#x27;World&#x27;;
    console.log(x, y);
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token parameter punctuation">,</span><span class="token parameter"> y</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    y </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">typeof</span><span class="token plain"> y </span><span class="token operator">===</span><span class="token plain"> </span><span class="token keyword nil">undefined</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> y </span><span class="token operator">||</span><span class="token plain"> </span><span class="token string">&#x27;World&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">x</span><span class="token punctuation">,</span><span class="token plain"> y</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="基本用法"><a aria-hidden="true" href="#基本用法"><span class="icon icon-link"></span></a>基本用法</h2><p>ES6 允许为函数的参数设置默认值，即直接写在参数定义的后面。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function foo(x, y = &#x27;World&#x27;) {
    console.log(x, y);
}

log(&#x27;Hello&#x27;)            // Hello World
log(&#x27;Hello&#x27;, &#x27;China&#x27;)   // Hello China
log(&#x27;Hello&#x27;, &#x27;&#x27;)        // Hello
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token plain">x</span><span class="token punctuation">,</span><span class="token plain"> y </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;World&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">x</span><span class="token punctuation">,</span><span class="token plain"> y</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Hello&#x27;</span><span class="token punctuation">)</span><span class="token plain">            </span><span class="token comment">// Hello World</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Hello&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;China&#x27;</span><span class="token punctuation">)</span><span class="token plain">   </span><span class="token comment">// Hello China</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Hello&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token plain">        </span><span class="token comment">// Hello</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>优点：</p><ul><li>阅读代码的人，可以立刻意识到哪些参数是可以省略的，不用查看函数体或文档</li><li>有利于将来的代码优化，即使未来的版本在对外接口中，彻底拿掉这个参数，也不会导致以前的代码无法运行</li></ul><h3 id="默认声明"><a aria-hidden="true" href="#默认声明"><span class="icon icon-link"></span></a>默认声明</h3><p>参数变量是<strong>默认声明</strong>的，所以不能用 <code>let</code> 或 <code>const</code> 再次声明。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function foo(x = 1){
    let x = 2;
    // SyntaxError: Identifier &#x27;x&#x27; has already been declared
    const x = 3;
    // SyntaxError: Identifier &#x27;x&#x27; has already been declared
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">let</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// SyntaxError: Identifier &#x27;x&#x27; has already been declared</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// SyntaxError: Identifier &#x27;x&#x27; has already been declared</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="参数不同名"><a aria-hidden="true" href="#参数不同名"><span class="icon icon-link"></span></a>参数不同名</h3><p>使用参数默认值时，函数不能有同名参数。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// 不报错
function foo(x, x, y) {
  // do something
}

// 报错
function foo(x, x, y = 1) {
  // do something
}
// SyntaxError: Duplicate parameter name not allowed in this context
" data-status="copy"></button><div class="token-line"><span class="token comment">// 不报错</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token parameter punctuation">,</span><span class="token parameter"> x</span><span class="token parameter punctuation">,</span><span class="token parameter"> y</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// do something</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 报错</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token parameter punctuation">,</span><span class="token parameter"> x</span><span class="token parameter punctuation">,</span><span class="token parameter"> y </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter number">1</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// do something</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// SyntaxError: Duplicate parameter name not allowed in this context</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="惰性求值"><a aria-hidden="true" href="#惰性求值"><span class="icon icon-link"></span></a>惰性求值</h3><p>参数默认值不是传值的，而是每次都重新计算默认值表达式的值。也就是说，参数默认值是惰性求值的。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="let x = 99;
function foo(p = x + 1) {
  console.log(p);
}

foo() // 100

x = 100;
foo() // 101
" data-status="copy"></button><div class="token-line"><span class="token keyword">let</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">99</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">p </span><span class="token parameter operator">=</span><span class="token parameter"> x </span><span class="token parameter operator">+</span><span class="token parameter"> </span><span class="token parameter number">1</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">p</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// 100</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">100</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// 101</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="与解构赋值结合使用"><a aria-hidden="true" href="#与解构赋值结合使用"><span class="icon icon-link"></span></a>与解构赋值结合使用</h2><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function foo({x, y = 5}) {
  console.log(x, y);
}

foo({})             // undefined 5
foo({x: 1})         // 1 5
foo({x: 1, y: 2})   // 1 2
foo()               // TypeError: Cannot read property &#x27;x&#x27; of undefined
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter punctuation">{</span><span class="token parameter">x</span><span class="token parameter punctuation">,</span><span class="token parameter"> y </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter number">5</span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">x</span><span class="token punctuation">,</span><span class="token plain"> y</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain">             </span><span class="token comment">// undefined 5</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain">x</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain">         </span><span class="token comment">// 1 5</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain">x</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> y</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain">   </span><span class="token comment">// 1 2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain">               </span><span class="token comment">// TypeError: Cannot read property &#x27;x&#x27; of undefined</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>上面代码只使用了对象的解构赋值默认值，没有使用函数参数的默认值。只有当函数 <code>foo</code> 的参数是一个对象时，变量 <code>x</code> 和 <code>y</code> 才会通过解构赋值生成。如果函数 <code>foo</code> 调用时没提供参数，变量 <code>x</code> 和 <code>y</code> 就不会生成，从而报错。通过提供函数参数的默认值，就可以避免这种情况。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function foo({x, y = 5} = {}) {
  console.log(x, y);
}

foo() // undefined 5
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter punctuation">{</span><span class="token parameter">x</span><span class="token parameter punctuation">,</span><span class="token parameter"> y </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter number">5</span><span class="token parameter punctuation">}</span><span class="token parameter"> </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter punctuation">{</span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">x</span><span class="token punctuation">,</span><span class="token plain"> y</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// undefined 5</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>下面是另一个解构赋值默认值的例子。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function fetch(url, { body = &#x27;&#x27;, method = &#x27;GET&#x27;, headers = {} }) {
  console.log(method);
}

fetch(&#x27;http://example.com&#x27;, {})
// &quot;GET&quot;

fetch(&#x27;http://example.com&#x27;)
// 报错
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token plain">url</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> body </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">,</span><span class="token plain"> method </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;GET&#x27;</span><span class="token punctuation">,</span><span class="token plain"> headers </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">method</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#x27;http://example.com&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// &quot;GET&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#x27;http://example.com&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 报错</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>上面代码中，如果函数<code>fetch</code>的第二个参数是一个对象，就可以为它的三个属性设置默认值。这种写法不能省略第二个参数，如果结合函数参数的默认值，就可以省略第二个参数。这时，就出现了双重默认值。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function fetch(url, { body = &#x27;&#x27;, method = &#x27;GET&#x27;, headers = {} } = {}) {
  console.log(method);
}

fetch(&#x27;http://example.com&#x27;)
// &quot;GET&quot;
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token plain">url</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> body </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">,</span><span class="token plain"> method </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;GET&#x27;</span><span class="token punctuation">,</span><span class="token plain"> headers </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">method</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#x27;http://example.com&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// &quot;GET&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>上面代码中，函数 <code>fetch</code> 没有第二个参数时，函数参数的默认值就会生效，然后才是解构赋值的默认值生效，变量 <code>method</code> 才会取到默认值 <code>GET</code>。</p><h3 id="结合案例分析"><a aria-hidden="true" href="#结合案例分析"><span class="icon icon-link"></span></a>结合案例分析</h3><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// 写法一
function m1({x = 0, y = 0} = {}) {
  return [x, y];
}

// 写法二
function m2({x, y} = { x: 0, y: 0 }) {
  return [x, y];
}
" data-status="copy"></button><div class="token-line"><span class="token comment">// 写法一</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">m1</span><span class="token punctuation">(</span><span class="token parameter punctuation">{</span><span class="token parameter">x </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter number">0</span><span class="token parameter punctuation">,</span><span class="token parameter"> y </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter number">0</span><span class="token parameter punctuation">}</span><span class="token parameter"> </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter punctuation">{</span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">x</span><span class="token punctuation">,</span><span class="token plain"> y</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 写法二</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">m2</span><span class="token punctuation">(</span><span class="token parameter punctuation">{</span><span class="token parameter">x</span><span class="token parameter punctuation">,</span><span class="token parameter"> y</span><span class="token parameter punctuation">}</span><span class="token parameter"> </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter punctuation">{</span><span class="token parameter"> x</span><span class="token parameter punctuation">:</span><span class="token parameter"> </span><span class="token parameter number">0</span><span class="token parameter punctuation">,</span><span class="token parameter"> y</span><span class="token parameter punctuation">:</span><span class="token parameter"> </span><span class="token parameter number">0</span><span class="token parameter"> </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">x</span><span class="token punctuation">,</span><span class="token plain"> y</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>上面两种写法都对函数的参数设定了默认值，区别是写法一函数参数的默认值是空对象，但是设置了对象解构赋值的默认值；写法二函数参数的默认值是一个有具体属性的对象，但是没有设置对象解构赋值的默认值。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// 函数没有参数的情况
m1() // [0, 0]
m2() // [0, 0]

// x 和 y 都有值的情况
m1({x: 3, y: 8}) // [3, 8]
m2({x: 3, y: 8}) // [3, 8]

// x 有值，y 无值的情况
m1({x: 3}) // [3, 0]
m2({x: 3}) // [3, undefined]

// x 和 y 都无值的情况
m1({}) // [0, 0];
m2({}) // [undefined, undefined]

m1({z: 3}) // [0, 0]
m2({z: 3}) // [undefined, undefined]
" data-status="copy"></button><div class="token-line"><span class="token comment">// 函数没有参数的情况</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// [0, 0]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// [0, 0]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// x 和 y 都有值的情况</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain">x</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> y</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// [3, 8]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain">x</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> y</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// [3, 8]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// x 有值，y 无值的情况</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain">x</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// [3, 0]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain">x</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// [3, undefined]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// x 和 y 都无值的情况</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// [0, 0];</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// [undefined, undefined]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain">z</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// [0, 0]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain">z</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// [undefined, undefined]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="参数默认值的位置"><a aria-hidden="true" href="#参数默认值的位置"><span class="icon icon-link"></span></a>参数默认值的位置</h2><p>通常情况下，定义了默认值的参数，应该是函数的尾参数。因为这样比较容易看出来，到底省略了哪些参数。如果非尾部的参数设置默认值，实际上这个参数是没法省略的。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// example 1
function foo(x = 1, y){
    return [x, y];
}

foo();                  // [1, undefined]
foo(2);                 // [2, undefined]
foo(, 1);               // Uncaught SyntaxError: Unexpected token ,
foo(undefined, 1);      // [1, 1]

// example 2
function bar(x, y = 5, z){
    return [x, y, z];
}

bar();                  // [undefined, 5, undefined]
bar(1);                 // [1, 5, undefined]
bar(1, ,2);             // Uncaught SyntaxError: Unexpected token ,
bar(1, undefined, 2);   // [1, 5, 2]
" data-status="copy"></button><div class="token-line"><span class="token comment">// example 1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter number">1</span><span class="token parameter punctuation">,</span><span class="token parameter"> y</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">x</span><span class="token punctuation">,</span><span class="token plain"> y</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">                  </span><span class="token comment">// [1, undefined]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">                 </span><span class="token comment">// [2, undefined]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">               </span><span class="token comment">// Uncaught SyntaxError: Unexpected token ,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword nil">undefined</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">      </span><span class="token comment">// [1, 1]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// example 2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token parameter punctuation">,</span><span class="token parameter"> y </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter number">5</span><span class="token parameter punctuation">,</span><span class="token parameter"> z</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">x</span><span class="token punctuation">,</span><span class="token plain"> y</span><span class="token punctuation">,</span><span class="token plain"> z</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">                  </span><span class="token comment">// [undefined, 5, undefined]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">                 </span><span class="token comment">// [1, 5, undefined]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">             </span><span class="token comment">// Uncaught SyntaxError: Unexpected token ,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token keyword nil">undefined</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">   </span><span class="token comment">// [1, 5, 2]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>如果传入<code>undefined</code>，将触发该参数等于默认值，<code>null</code>则没有这个效果。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function foo(x = 5, y = 6) {
  console.log(x, y);
}

foo(undefined, null)
// 5 null
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter number">5</span><span class="token parameter punctuation">,</span><span class="token parameter"> y </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter number">6</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">x</span><span class="token punctuation">,</span><span class="token plain"> y</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword nil">undefined</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 5 null</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="函数的-length-属性"><a aria-hidden="true" href="#函数的-length-属性"><span class="icon icon-link"></span></a>函数的 length 属性</h2><p>指定了默认值以后，函数的<code>length</code>属性，将返回没有指定默认值的参数个数。也就是说，指定了默认值后，<code>length</code>属性将失真。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="(function (a) {}).length // 1
(function (a = 5) {}).length // 0
(function (a, b, c = 5) {}).length // 2
" data-status="copy"></button><div class="token-line"><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token comment">// 1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">a </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter number">5</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token comment">// 0</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token parameter punctuation">,</span><span class="token parameter"> b</span><span class="token parameter punctuation">,</span><span class="token parameter"> c </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter number">5</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token comment">// 2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>上面代码中，<code>length</code> 属性的返回值，等于函数的参数个数减去指定了默认值的参数个数。比如，上面最后一个函数，定义了 3 个参数，其中有一个参数 <code>c</code> 指定了默认值，因此 <code>length</code> 属性等于 <code>3</code> 减去 <code>1</code>，最后得到 <code>2</code>。</p><p>这是因为 <code>length</code> 属性的含义是，该函数预期传入的参数个数。某个参数指定默认值以后，预期传入的参数个数就不包括这个参数了。同理，后文的 rest 参数也不会计入 <code>length</code> 属性。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="(function(...args) {}).length // 0
" data-status="copy"></button><div class="token-line"><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter operator">...</span><span class="token parameter">args</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token comment">// 0</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>如果设置了默认值的参数不是尾参数，那么<code>length</code>属性也不再计入后面的参数了。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="(function (a = 0, b, c) {}).length // 0
(function (a, b = 1, c) {}).length // 1
" data-status="copy"></button><div class="token-line"><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">a </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter number">0</span><span class="token parameter punctuation">,</span><span class="token parameter"> b</span><span class="token parameter punctuation">,</span><span class="token parameter"> c</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token comment">// 0</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token parameter punctuation">,</span><span class="token parameter"> b </span><span class="token parameter operator">=</span><span class="token parameter"> </span><span class="token parameter number">1</span><span class="token parameter punctuation">,</span><span class="token parameter"> c</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token comment">// 1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="作用域"><a aria-hidden="true" href="#作用域"><span class="icon icon-link"></span></a>作用域</h2><p>一旦设置了参数的默认值，函数进行声明初始化时，参数会形成一个单独的作用域（context）。等到初始化结束，这个作用域就会消失。这种语法行为，在不设置参数默认值时，是不会出现的。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="var x = 1;

function foo(x, y = x) {
  console.log(y);
}

f(2) // 2
" data-status="copy"></button><div class="token-line"><span class="token keyword">var</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token parameter punctuation">,</span><span class="token parameter"> y </span><span class="token parameter operator">=</span><span class="token parameter"> x</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">y</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// 2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>上面代码中，参数 <code>y</code> 的默认值等于变量 <code>x</code>。调用函数 <code>foo</code> 时，参数形成一个单独的作用域。在这个作用域里面，默认值变量 <code>x</code> 指向第一个参数 <code>x</code>，而不是全局变量 <code>x</code>，所以输出是 <code>2</code>。</p><p>再看下面的例子。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="let x = 1;

function foo(y = x) {
  let x = 2;
  console.log(y);
}

foo() // 1
" data-status="copy"></button><div class="token-line"><span class="token keyword">let</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">y </span><span class="token parameter operator">=</span><span class="token parameter"> x</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">y</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// 1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>上面代码中，函数 <code>foo</code> 调用时，参数 <code>y = x</code> 形成一个单独的作用域。这个作用域里面，变量 <code>x</code> 本身没有定义，所以指向外层的全局变量 <code>x</code>。函数调用时，函数体内部的局部变量 <code>x</code> 影响不到默认值变量 <code>x</code>。</p><p>如果此时，全局变量 <code>x</code> 不存在，就会报错。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function foo(y = x) {
  let x = 2;
  console.log(y);
}

f() // ReferenceError: x is not defined
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">y </span><span class="token parameter operator">=</span><span class="token parameter"> x</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">y</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// ReferenceError: x is not defined</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>下面这样写，也会报错。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="var x = 1;

function foo(x = x) {
  // ...
}

foo() // ReferenceError: x is not defined
" data-status="copy"></button><div class="token-line"><span class="token keyword">var</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x </span><span class="token parameter operator">=</span><span class="token parameter"> x</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// ReferenceError: x is not defined</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>上面代码中，参数 <code>x = x</code> 形成一个单独作用域。实际执行的是 <code>let x = x</code>，由于暂时性死区的原因，这行代码会报错 <code>x is not defined</code>（指第二个 <code>x</code> 未定义）。</p><p>如果参数的默认值是一个函数，该函数的作用域也遵守这个规则。请看下面的例子。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="let foo = &#x27;outer&#x27;;

function bar(func = () =&gt; foo) {
  let foo = &#x27;inner&#x27;;
  console.log(func());
}

bar(); // outer
" data-status="copy"></button><div class="token-line"><span class="token keyword">let</span><span class="token plain"> foo </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;outer&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token function-variable function">func</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> foo</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> foo </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;inner&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// outer</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>上面代码中，函数 <code>bar</code> 的参数 <code>func</code> 的默认值是一个匿名函数，返回值为变量 <code>foo</code>。函数参数形成的单独作用域里面，并没有定义变量 <code>foo</code>，所以 <code>foo</code> 指向外层的全局变量 <code>foo</code>，因此输出 <code>outer</code>。</p><p>如果写成下面这样，就会报错。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function bar(func = () =&gt; foo) {
  let foo = &#x27;inner&#x27;;
  console.log(func());
}

bar() // ReferenceError: foo is not defined
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token function-variable function">func</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> foo</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> foo </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;inner&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// ReferenceError: foo is not defined</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>上面代码中，匿名函数里面的 <code>foo</code> 指向函数外层，但是函数外层并没有声明变量 <code>foo</code>，所以就报错了。</p><p>下面是一个更复杂的例子。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="var x = 1;
function foo(x, y = function() { x = 2; }) {
  var x = 3;
  y();
  console.log(x);
}

foo()   // 3
x       // 1
" data-status="copy"></button><div class="token-line"><span class="token keyword">var</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token plain">x</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token function-variable function">y</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">x</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain">   </span><span class="token comment">// 3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">x       </span><span class="token comment">// 1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>上面代码中，函数 <code>foo</code> 的参数形成一个单独作用域。这个作用域里面，首先声明了变量 <code>x</code>，然后声明了变量<code>y</code>，<code>y</code> 的默认值是一个匿名函数。这个匿名函数内部的变量 <code>x</code>，指向同一个作用域的第一个参数 <code>x</code>。函数 <code>foo</code>内部又声明了一个内部变量 <code>x</code>，该变量与第一个参数 <code>x</code> 由于不是同一个作用域，所以不是同一个变量，因此执行<code>y</code>后，内部变量<code>x</code>和外部全局变量 <code>x</code> 的值都没变。</p><p>如果将 <code>var x = 3</code> 的 <code>var</code> 去除，函数 <code>foo</code> 的内部变量 <code>x</code> 就指向第一个参数 <code>x</code>，与匿名函数内部的 <code>x</code> 是一致的，所以最后输出的就是 <code>2</code>，而外层的全局变量 <code>x</code> 依然不受影响。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="var x = 1;
function foo(x, y = function() { x = 2; }) {
  x = 3;
  y();
  console.log(x);
}

foo()   // 2
x       // 1
" data-status="copy"></button><div class="token-line"><span class="token keyword">var</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token plain">x</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token function-variable function">y</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">x</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain">   </span><span class="token comment">// 2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">x       </span><span class="token comment">// 1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><strong>总结：</strong></p><ul><li>函数声明初始化时，一旦设置了参数默认值，参数会形成一个单独的作用域，等初始化结束后，该作用域即会消失。这种语法在不设置参数默认值的时候是不会出现的。</li><li>参数作用域出线的变量名率先寻找参数作用域内先声明的参数，若不存在则寻找外部作用域的（不会从函数内部作用域寻找）<ul><li>若先声明的参数已定义，则该值为该参数所定义的值</li><li>若先声明的参数未定义，并且外部作用域无同名变量已定义，则报错</li></ul></li><li>若参数默认值为函数，则该作为默认值的函数作用域与参数独立作用域相同<ul><li>当函数内部作用域重新声明与已有参数同名变量，变量与同名参数不为同一变量</li><li>当函数内部作用域存在同名变量（没有重新声明），变量指向的是函数参数本身</li></ul></li></ul><h2 id="抛弃-arguments"><a aria-hidden="true" href="#抛弃-arguments"><span class="icon icon-link"></span></a>抛弃 arguments</h2><p>现在我们已经看到了 <code>arguments</code> 对象可被不定参数和默认参数完美代替，移除 <code>arguments</code> 后通常会使代码更易于阅读。除了破坏可读性外，众所周知，针对 <code>arguments</code> 对象对 JavaScript 虚拟机进行的优化会导致一些让你头疼不已的问题。</p><p>我们期待着不定参数和默认参数可以完全取代 <code>arguments</code>，要实现这个目标，标准中增加了相应的限制：在使用不定参数或默认参数的函数中禁止使用 <code>arguments</code> 对象。曾经实现过 <code>arguments</code> 的引擎不会立即移除对它的支持，当然，现在更推荐使用不定参数和默认参数。</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook/edit/master/docs/core-modules/ecmascript-function-objects/function-arguments/default-parameters.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">6/24/2020, 5:12:49 PM</span></div></div></div></div>

    <script src="/javascript-guidebook/umi.24c5d124.js"></script>
    <script src="/javascript-guidebook/docs__core-modules__ecmascript-function-objects__function-arguments__default-parameters.md.55d9302e.async.js"></script>
  </body>
</html>
