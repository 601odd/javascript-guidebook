<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/javascript-guidebook/umi.b538b811.css" />
    <script>
      window.routerBase = "/javascript-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.7
    </script>
    <title>&#x97F3;&#x9891;</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/javascript-guidebook-favicon.png&#x27;)" href="/javascript-guidebook//">JavaScript Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/javascript-guidebook//basic-concept">基本语法</a><a href="/javascript-guidebook//standard-built-in-objects">内置对象</a><a href="/javascript-guidebook//core-modules">核心模块</a><a href="/javascript-guidebook//object-oriented-programming">OOP</a><a aria-current="page" class="active" href="/javascript-guidebook//browser-object-model">BOM</a><a href="/javascript-guidebook//document-object-model">DOM</a><a href="/javascript-guidebook//computer-networks">计算机网络</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/javascript-guidebook-favicon.png&#x27;)" href="/javascript-guidebook//"></a><h1>JavaScript Guidebook</h1><p>JavaScript 完全知识体系</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/javascript-guidebook//basic-concept">基本语法</a></li><li><a href="/javascript-guidebook//standard-built-in-objects">内置对象</a></li><li><a href="/javascript-guidebook//core-modules">核心模块</a></li><li><a href="/javascript-guidebook//object-oriented-programming">OOP</a></li><li><a aria-current="page" class="active" href="/javascript-guidebook//browser-object-model">BOM</a></li><li><a href="/javascript-guidebook//document-object-model">DOM</a></li><li><a href="/javascript-guidebook//computer-networks">计算机网络</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/javascript-guidebook//browser-object-model">BOM 浏览器对象模型</a></li><li><a href="/javascript-guidebook//browser-object-model/window">全局对象</a><ul><li><a href="/javascript-guidebook//browser-object-model/window/window"><span>Window 对象</span></a></li><li><a href="/javascript-guidebook//browser-object-model/window/location"><span>Location 对象</span></a></li><li><a href="/javascript-guidebook//browser-object-model/window/history"><span>History 对象</span></a></li><li><a href="/javascript-guidebook//browser-object-model/window/screen"><span>Screen 对象</span></a></li><li><a href="/javascript-guidebook//browser-object-model/window/navigator"><span>Navigator 对象</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/web-event">全局 API</a><ul><li><a href="/javascript-guidebook//browser-object-model/web-event/set-interval"><span>setInterval 间歇调用</span></a></li><li><a href="/javascript-guidebook//browser-object-model/web-event/set-time-out"><span>setTimeout 超时调用</span></a></li><li><a href="/javascript-guidebook//browser-object-model/web-event/alert"><span>alert</span></a></li><li><a href="/javascript-guidebook//browser-object-model/web-event/confirm"><span>confirm</span></a></li><li><a href="/javascript-guidebook//browser-object-model/web-event/prompt"><span>prompt</span></a></li><li><a href="/javascript-guidebook//browser-object-model/web-event/drag-and-drop-api"><span>拖放 API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/web-event/request-animation-frame"><span>动画 API</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/window-position">视窗尺寸位置</a><ul><li><a href="/javascript-guidebook//browser-object-model/window-position/window-view-properties"><span>Window 对象视图属性</span></a></li><li><a href="/javascript-guidebook//browser-object-model/window-position/screen-view-properties"><span>Screen 对象视图属性</span></a></li><li><a href="/javascript-guidebook//browser-object-model/window-position/element-view-properties"><span>Element 文档元素视图属性</span></a></li><li><a href="/javascript-guidebook//browser-object-model/window-position/document-view-and-element-view"><span>文档视图和元素视图</span></a></li><li><a href="/javascript-guidebook//browser-object-model/window-position/mouse-position"><span>鼠标位置</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files">二进制数据和文件 API</a><ul><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files/local-files-application"><span>本地文件应用</span></a></li><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files/blob"><span>Blob API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files/file"><span>File API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files/file-list"><span>FileList API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files/file-reader"><span>FileReader API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files/file-reader-sync"><span>FileReaderSync API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files/url"><span>URL API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files/form-data"><span>FormData API</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/connectivity">数据通信 API</a><ul><li><a href="/javascript-guidebook//browser-object-model/connectivity/post-message"><span>PostMessage</span></a></li><li><a href="/javascript-guidebook//browser-object-model/connectivity/xmlhttprequest"><span>XHMLHttpRequest API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/connectivity/featch"><span>Fetch API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/connectivity/beacon"><span>Beacon API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/connectivity/web-socket"><span>WebSocket</span></a></li><li><a href="/javascript-guidebook//browser-object-model/connectivity/event-source"><span>EventSource</span></a></li><li><a href="/javascript-guidebook//browser-object-model/connectivity/server-sent-events"><span>Server-sent Events</span></a></li><li><a href="/javascript-guidebook//browser-object-model/connectivity/web-real-time-communication"><span>WebRTC</span></a></li><li><a href="/javascript-guidebook//browser-object-model/connectivity/progress-event"><span>Progress Event</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/offline-and-storage">离线与存储 API</a><ul><li><a href="/javascript-guidebook//browser-object-model/offline-and-storage/browser-cache"><span>浏览器缓存机制</span></a></li><li><a href="/javascript-guidebook//browser-object-model/offline-and-storage/http-cache"><span>HTTP Cache</span></a></li><li><a href="/javascript-guidebook//browser-object-model/offline-and-storage/cookie"><span>Cookie</span></a></li><li><a href="/javascript-guidebook//browser-object-model/offline-and-storage/web-storage"><span>Web Storage</span></a></li><li><a href="/javascript-guidebook//browser-object-model/offline-and-storage/web-workers"><span>Web Workers</span></a></li><li><a href="/javascript-guidebook//browser-object-model/offline-and-storage/service-worker"><span>Service Worker</span></a></li><li><a href="/javascript-guidebook//browser-object-model/offline-and-storage/indexed-db"><span>IndexedDB</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/performance">性能 API</a><ul><li><a href="/javascript-guidebook//browser-object-model/performance/performance"><span>Performance API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/performance/performance-resource-timing"><span>Performance Resource Timing API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/performance/performance-navigation-timing"><span>Performance Navifation API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/performance/perfromance-timeline"><span>性能时间线</span></a></li></ul></li><li><a aria-current="page" class="active" href="/javascript-guidebook//browser-object-model/multimedia">多媒体 API</a><ul><li><a aria-current="page" class="active" href="/javascript-guidebook//browser-object-model/multimedia/audio"><span>音频</span></a></li><li><a href="/javascript-guidebook//browser-object-model/multimedia/video"><span>视频</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/device">设备 API</a><ul><li><a href="/javascript-guidebook//browser-object-model/device/geolocation"><span>地理定位</span></a></li><li><a href="/javascript-guidebook//browser-object-model/device/touch-event"><span>触控事件</span></a></li><li><a href="/javascript-guidebook//browser-object-model/device/camera"><span>摄像头访问</span></a></li><li><a href="/javascript-guidebook//browser-object-model/device/the-position-object"><span>Position 对象</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/integration">集成 API</a><ul><li><a href="/javascript-guidebook//browser-object-model/integration/full-screen"><span>全屏 API</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle">浏览器工作原理</a><ul><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/workflow"><span>工作流程</span></a></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/the-rendering-engine"><span>渲染引擎</span></a></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/constructing-the-object-model"><span>构建对象模型</span></a></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/script-loads"><span>脚本加载</span></a></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/render-tree-construction"><span>渲染树构建</span></a></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/layout"><span>布局</span></a></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/painting"><span>绘制</span></a></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/reflow-and-repaint"><span>回流和重绘</span></a></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/css2-visual-module"><span>CSS2 可视化模型</span></a></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/composite"><span>渲染层和合并</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/wireless-development">移动开发</a><ul><li><a href="/javascript-guidebook//browser-object-model/wireless-development/mobile-web-development"><span>移动 Web</span></a></li><li><a href="/javascript-guidebook//browser-object-model/wireless-development/viewport"><span>视口</span></a></li><li><a href="/javascript-guidebook//browser-object-model/wireless-development/adaptation"><span>适配方案</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="AudioContext" data-depth="2" class=""><a href="/javascript-guidebook//browser-object-model/multimedia/audio#audiocontext"><span>AudioContext</span></a></li><li title="音频转换成 Buffer 格式" data-depth="2" class=""><a href="/javascript-guidebook//browser-object-model/multimedia/audio#音频转换成-buffer-格式"><span>音频转换成 Buffer 格式</span></a></li><li title="AudioNode" data-depth="2" class=""><a href="/javascript-guidebook//browser-object-model/multimedia/audio#audionode"><span>AudioNode</span></a></li><li title="方法" data-depth="3" class=""><a href="/javascript-guidebook//browser-object-model/multimedia/audio#方法"><span>方法</span></a></li><li title="AudioBufferSourceNode" data-depth="3" class=""><a href="/javascript-guidebook//browser-object-model/multimedia/audio#audiobuffersourcenode"><span>AudioBufferSourceNode</span></a></li><li title="AudioDestinationNode" data-depth="3" class=""><a href="/javascript-guidebook//browser-object-model/multimedia/audio#audiodestinationnode"><span>AudioDestinationNode</span></a></li><li title="GainNode" data-depth="3" class=""><a href="/javascript-guidebook//browser-object-model/multimedia/audio#gainnode"><span>GainNode</span></a></li><li title="BiquadFilterNode" data-depth="3" class=""><a href="/javascript-guidebook//browser-object-model/multimedia/audio#biquadfilternode"><span>BiquadFilterNode</span></a></li><li title="多个音频源" data-depth="2" class=""><a href="/javascript-guidebook//browser-object-model/multimedia/audio#多个音频源"><span>多个音频源</span></a></li><li title="多个音频处理模块" data-depth="2" class=""><a href="/javascript-guidebook//browser-object-model/multimedia/audio#多个音频处理模块"><span>多个音频处理模块</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="音频"><a aria-hidden="true" href="#音频"><span class="icon icon-link"></span></a>音频</h1><p>HTML5 <code>&lt;audio&gt;</code> 元素用于在文档中表示音频内容。</p><p>HTML5 音频 API 的主要框架和工作流程如下图，在 AudioContext 音频上下文中，把音频文件转成 buffer 格式，从音频源 source 开始，经过 AuidoNode 处理音频，最好到达 destination 输出音乐。这里形成了一个音频通道，每个模块通过 connect 方法链接并传送音频。</p></div><img alt="AudioContext" src="/javascript-guidebook/static/audio-context.10e1d31b.png" width="800"/><div class="markdown"><h2 id="audiocontext"><a aria-hidden="true" href="#audiocontext"><span class="icon icon-link"></span></a>AudioContext</h2><p>通过全局的 AudioContext 能获取当前网页音频上下文。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="let audioContext = new (window.AudioContext || window.webkitAudioContext)();
" data-status="copy"></button><div class="token-line"><span class="token keyword">let</span><span class="token plain"> audioContext </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access maybe-class-name">AudioContext</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">webkitAudioContext</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><strong>属性</strong></p><table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td>destination</td><td>返回 AudioDestinationNode 对象，表示 AudioContext 中所有节点的最终节点，一般表示音频渲染设备。</td></tr></tbody></table><p><strong>方法</strong></p><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>createBufferSource()</td><td>创建一个 AudioBufferSourceNode 对象，他可以通过 AudioBuffer 对象来播放和处理包含在内的音频数据。</td></tr><tr><td>createGain()</td><td>创建一个 GainNode，它可以控制音频的总音量。</td></tr><tr><td>createBiquadFilter()</td><td>创建一个 BiquadFilterNode，它代表一个双二阶滤波器，可以设置集中不同且常见滤波器类型：高通、低通、带通等。</td></tr><tr><td>createOscillator()</td><td>创建一个 OscillatorNode，它表示一个周期性波形，基本上来说创造了一个音调。</td></tr></tbody></table><h2 id="音频转换成-buffer-格式"><a aria-hidden="true" href="#音频转换成-buffer-格式"><span class="icon icon-link"></span></a>音频转换成 Buffer 格式</h2><p>使用 <code>decodeAudioData()</code> 方法把音频文件编译成 buffer 格式。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function decodeAudioData(audioContext, url) {
  return new Promise(resolve =&gt; {
    let request = new XMLHttpRequest();
    request.open(&#x27;GET&#x27;, url, true);
    request.responseType = &#x27;arraybuffer&#x27;;
    request.onload = () =&gt; {
      audioContext.decodeAudioData(request.response, buffer =&gt; {
        if (!buffer) {
          alert(&#x27;error decoding file data: &#x27; + url);
          return;
        } else {
          resolve(buffer);
        }
      });
    };
    request.onerror = function() {
      alert(&#x27;BufferLoader: XHR error&#x27;);
    };
    request.send();
  });
}

let buffer = decodeAudioData(audioContext, &#x27;./sounds/music.mp3&#x27;);
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">decodeAudioData</span><span class="token punctuation">(</span><span class="token parameter">audioContext</span><span class="token parameter punctuation">,</span><span class="token parameter"> url</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">let</span><span class="token plain"> request </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    request</span><span class="token punctuation">.</span><span class="token method function property-access">open</span><span class="token punctuation">(</span><span class="token string">&#x27;GET&#x27;</span><span class="token punctuation">,</span><span class="token plain"> url</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    request</span><span class="token punctuation">.</span><span class="token property-access">responseType</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;arraybuffer&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    request</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onload</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      audioContext</span><span class="token punctuation">.</span><span class="token method function property-access">decodeAudioData</span><span class="token punctuation">(</span><span class="token plain">request</span><span class="token punctuation">.</span><span class="token property-access">response</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token parameter">buffer</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">buffer</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#x27;error decoding file data: &#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> url</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token keyword">return</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">else</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token plain">buffer</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    request</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onerror</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#x27;BufferLoader: XHR error&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    request</span><span class="token punctuation">.</span><span class="token method function property-access">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> buffer </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">decodeAudioData</span><span class="token punctuation">(</span><span class="token plain">audioContext</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;./sounds/music.mp3&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="audionode"><a aria-hidden="true" href="#audionode"><span class="icon icon-link"></span></a>AudioNode</h2><p>音频节点接口是一个音频处理模块。包括音频源，音频输出，中间处理模块。</p><h3 id="方法"><a aria-hidden="true" href="#方法"><span class="icon icon-link"></span></a>方法</h3><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>connect()</td><td>链接两个 <strong>AudioNode</strong> 节点，把音频从一个 <strong>AudioNode</strong> 节点输出到另一个 <strong>AudioNode</strong> 节点，形成一个音频通道。</td></tr><tr><td>disconnect()</td><td>把 <strong>AudioNode</strong> 节点与其他节点断开链接。</td></tr></tbody></table><h3 id="audiobuffersourcenode"><a aria-hidden="true" href="#audiobuffersourcenode"><span class="icon icon-link"></span></a>AudioBufferSourceNode</h3><p>音频源有多种，这里只介绍 <strong>buffer</strong> 的音频源，<strong>buffer</strong> 的音频源通过 <strong>AudioContext</strong> 接口的 <strong>createBufferSource</strong> 方法来创建。音频源节点继承 <strong>AudioNode</strong> 音频节点。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="let bufferSource = audioContext.createBufferSource();
" data-status="copy"></button><div class="token-line"><span class="token plain">let bufferSource = audioContext.createBufferSource();</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>创建了 <strong>AudioBufferSourceNode</strong> 对象后，把 <strong>buffer</strong> 格式的音频数据赋值给 <strong>AudioBufferSourceNode</strong> 对象的 <strong>buffer</strong> 属性，此时音频已经传递到音频源，可以对音频进行处理或输出。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="bufferSource.buffer = buffer;
" data-status="copy"></button><div class="token-line"><span class="token plain">bufferSource.buffer = buffer;</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><strong>方法</strong></p><p><strong>AudioBufferSourceNode.start(when[, duration])</strong></p><p>开始播放。</p><ul><li>when：延迟播放时间，单位为秒。</li><li>offset：定位音频到第几秒开始播放。</li><li>duration：从开始播放结束时长，当经过设置秒数后自动结束音频播放。</li></ul><p><strong>AudioBufferSourceNode.stop([when])</strong></p><ul><li>when：延迟停止时间，单位为秒。</li></ul><p>停止播放，注意调用该方法后，无法再次调用 <strong>AudioBufferSourceNode.start</strong> 播放。</p><h3 id="audiodestinationnode"><a aria-hidden="true" href="#audiodestinationnode"><span class="icon icon-link"></span></a>AudioDestinationNode</h3><p>音频终点是通过 <strong>AudioContext</strong> 接口的 <strong>destination</strong> 属性访问的。音频终点继承 <strong>AudioNode</strong> 音频节点，</p><p><strong>AudioDestinationNode</strong> 节点无法再把音频信息传递给下一个音频节点，即无法再链接其他音频节点，因为他已经是终点，没有输出，也可以理解为他自己就是输出。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="let audioDestinationNode = audioContext.destination;
" data-status="copy"></button><div class="token-line"><span class="token plain">let audioDestinationNode = audioContext.destination;</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>此时我们有音频起点 <strong>AudioBufferSourceNode</strong> 和音频终点 <strong>AudioDestinationNode</strong> ，使用 <strong>AudioNode.connect()</strong> 方法把起点和终点链接起来，就形成了一条有输入输出的音频通道，可以把音频直接播放出来。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="bufferSource.connect(audioDestinationNode);
" data-status="copy"></button><div class="token-line"><span class="token plain">bufferSource.connect(audioDestinationNode);</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><a href="https://codepen.io/leechikit/pen/KvaJRp" target="_blank" rel="noopener noreferrer">戳我看栗子<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>点击预览。</p><h3 id="gainnode"><a aria-hidden="true" href="#gainnode"><span class="icon icon-link"></span></a>GainNode</h3><p>用于音量变化。它是一个 <strong>AudioNode</strong> 类型的音频处理模块。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="let gainNode = audioContext.createGain();
" data-status="copy"></button><div class="token-line"><span class="token plain">let gainNode = audioContext.createGain();</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>把音频源、音频输出和音频处理模块链接一起，形成可控制音量大小的音频。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="bufferSource.connect(gainNode);
gainNode.connect(audioDestinationNode);

let controlVolume = value =&gt; {
    gainNode.gain.value = value);
}

// 两倍音量播放
controlVolume(2);
" data-status="copy"></button><div class="token-line"><span class="token plain">bufferSource.connect(gainNode);</span></div><div class="token-line"><span class="token plain">gainNode.connect(audioDestinationNode);</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">let controlVolume = value =&gt; {</span></div><div class="token-line"><span class="token plain">    gainNode.gain.value = value);</span></div><div class="token-line"><span class="token plain">}</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">// 两倍音量播放</span></div><div class="token-line"><span class="token plain">controlVolume(2);</span></div><div class="token-line"><span class="token plain"></span></div></pre></div></div><img alt="AuditoContext2" src="/javascript-guidebook/static/audio-context-2.9da2abc1.png" width="800"/><div class="markdown"><p><a href="https://codepen.io/leechikit/pen/vJxewz" target="_blank" rel="noopener noreferrer">戳我看栗子<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>点击预览</p><h3 id="biquadfilternode"><a aria-hidden="true" href="#biquadfilternode"><span class="icon icon-link"></span></a>BiquadFilterNode</h3><p>表示一个简单的低频滤波器，可控制声调。它是一个 <strong>AudioNode</strong> 类型的音频处理模块。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="let filterNode = audioContext.createBiquadFilter();
" data-status="copy"></button><div class="token-line"><span class="token plain">let filterNode = audioContext.createBiquadFilter();</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>输出一个变调的音频：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="bufferSource.connect(filterNode);
filterNode.connect(audioDestinationNode);

let controlFrequency = function(value) {
    filterNode.frequency.value = value;
}

// 音频为1000变调
controlFrequency(1000);
" data-status="copy"></button><div class="token-line"><span class="token plain">bufferSource.connect(filterNode);</span></div><div class="token-line"><span class="token plain">filterNode.connect(audioDestinationNode);</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">let controlFrequency = function(value) {</span></div><div class="token-line"><span class="token plain">    filterNode.frequency.value = value;</span></div><div class="token-line"><span class="token plain">}</span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">// 音频为1000变调</span></div><div class="token-line"><span class="token plain">controlFrequency(1000);</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="多个音频源"><a aria-hidden="true" href="#多个音频源"><span class="icon icon-link"></span></a>多个音频源</h2><p>在一个音频上下文中，可以有多个音频处理通道，即多个音频源同时输出。各个音频处理通道内的操作是独立的，不影响其他音频通道。</p></div><img alt="AudioContext3" src="/javascript-guidebook/static/audio-context-3.811bdec9.png" width="800"/><div class="markdown"><p><a href="https://codepen.io/leechikit/pen/KvWyPV" target="_blank" rel="noopener noreferrer">戳我看栗子<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>点击预览</p><h2 id="多个音频处理模块"><a aria-hidden="true" href="#多个音频处理模块"><span class="icon icon-link"></span></a>多个音频处理模块</h2><p>一个音频源可以经过多个音频处理模块处理，音频处理模块叠加效果后输出。</p></div><img alt="Webpack执行流程" src="/javascript-guidebook/static/audio-context-4.a4e17edb.png" width="800"/><div class="markdown"><hr/><p><strong>参考资料：</strong></p><ul><li><a href="https://segmentfault.com/a/1190000010561222" target="_blank" rel="noopener noreferrer">HTML5 音频 API Web Audio<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook/edit/master/docs/browser-object-model/multimedia/audio.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">7/2/2020, 4:20:09 PM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/javascript-guidebook/umi.ea2532d0.js"></script>
    <script src="/javascript-guidebook/docs__browser-object-model__multimedia__audio.md.7bd9f919.async.js"></script>
  </body>
</html>
