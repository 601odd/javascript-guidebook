<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/javascript-guidebook/umi.css" />
    <script>
      window.routerBase = "/javascript-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.19
    </script>
    <title>视口</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/javascript-guidebook-favicon.png&#x27;)" href="/javascript-guidebook//">JavaScript Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/javascript-guidebook//basic-concept">基本语法</a><a href="/javascript-guidebook//standard-built-in-objects">内置对象</a><a href="/javascript-guidebook//core-modules">核心模块</a><a href="/javascript-guidebook//object-oriented-programming">OOP</a><a aria-current="page" class="active" href="/javascript-guidebook//browser-object-model">BOM</a><a href="/javascript-guidebook//document-object-model">DOM</a><a href="/javascript-guidebook//computer-networks">计算机网络</a><a href="/javascript-guidebook//design-patterns">设计模式</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/javascript-guidebook-favicon.png&#x27;)" href="/javascript-guidebook//"></a><h1>JavaScript Guidebook</h1><p>JavaScript 完全知识体系</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/javascript-guidebook//basic-concept">基本语法</a></li><li><a href="/javascript-guidebook//standard-built-in-objects">内置对象</a></li><li><a href="/javascript-guidebook//core-modules">核心模块</a></li><li><a href="/javascript-guidebook//object-oriented-programming">OOP</a></li><li><a aria-current="page" class="active" href="/javascript-guidebook//browser-object-model">BOM</a></li><li><a href="/javascript-guidebook//document-object-model">DOM</a></li><li><a href="/javascript-guidebook//computer-networks">计算机网络</a></li><li><a href="/javascript-guidebook//design-patterns">设计模式</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/javascript-guidebook//browser-object-model">BOM 浏览器对象模型</a></li><li><a href="/javascript-guidebook//browser-object-model/window">全局对象</a><ul><li><a href="/javascript-guidebook//browser-object-model/window/window"><span>Window 对象</span></a></li><li><a href="/javascript-guidebook//browser-object-model/window/location"><span>Location 对象</span></a></li><li><a href="/javascript-guidebook//browser-object-model/window/history"><span>History 对象</span></a></li><li><a href="/javascript-guidebook//browser-object-model/window/screen"><span>Screen 对象</span></a></li><li><a href="/javascript-guidebook//browser-object-model/window/navigator"><span>Navigator 对象</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/web-event">全局 API</a><ul><li><a href="/javascript-guidebook//browser-object-model/web-event/set-interval"><span>setInterval 间歇调用</span></a></li><li><a href="/javascript-guidebook//browser-object-model/web-event/set-time-out"><span>setTimeout 超时调用</span></a></li><li><a href="/javascript-guidebook//browser-object-model/web-event/alert"><span>alert</span></a></li><li><a href="/javascript-guidebook//browser-object-model/web-event/confirm"><span>confirm</span></a></li><li><a href="/javascript-guidebook//browser-object-model/web-event/prompt"><span>prompt</span></a></li><li><a href="/javascript-guidebook//browser-object-model/web-event/drag-and-drop-api"><span>拖放 API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/web-event/request-animation-frame"><span>动画 API</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/window-position">视窗尺寸位置</a><ul><li><a href="/javascript-guidebook//browser-object-model/window-position/window-view-properties"><span>Window 对象视图属性</span></a></li><li><a href="/javascript-guidebook//browser-object-model/window-position/screen-view-properties"><span>Screen 对象视图属性</span></a></li><li><a href="/javascript-guidebook//browser-object-model/window-position/element-view-properties"><span>Element 文档元素视图属性</span></a></li><li><a href="/javascript-guidebook//browser-object-model/window-position/document-view-and-element-view"><span>文档视图和元素视图</span></a></li><li><a href="/javascript-guidebook//browser-object-model/window-position/mouse-position"><span>鼠标位置</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files">二进制数据和文件 API</a><ul><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files/local-files-application"><span>本地文件应用</span></a></li><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files/blob"><span>Blob API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files/file"><span>File API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files/file-list"><span>FileList API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files/file-reader"><span>FileReader API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files/file-reader-sync"><span>FileReaderSync API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files/url"><span>URL API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/binary-data-and-files/form-data"><span>FormData API</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/connectivity">数据通信 API</a><ul><li><a href="/javascript-guidebook//browser-object-model/connectivity/post-message"><span>PostMessage</span></a></li><li><a href="/javascript-guidebook//browser-object-model/connectivity/xmlhttprequest"><span>XHMLHttpRequest API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/connectivity/featch"><span>Fetch API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/connectivity/beacon"><span>Beacon API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/connectivity/web-socket"><span>WebSocket</span></a></li><li><a href="/javascript-guidebook//browser-object-model/connectivity/event-source"><span>EventSource</span></a></li><li><a href="/javascript-guidebook//browser-object-model/connectivity/server-sent-events"><span>Server-sent Events</span></a></li><li><a href="/javascript-guidebook//browser-object-model/connectivity/web-real-time-communication"><span>WebRTC</span></a></li><li><a href="/javascript-guidebook//browser-object-model/connectivity/progress-event"><span>Progress Event</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/offline-and-storage">离线与存储 API</a><ul><li><a href="/javascript-guidebook//browser-object-model/offline-and-storage/browser-cache"><span>浏览器缓存机制</span></a></li><li><a href="/javascript-guidebook//browser-object-model/offline-and-storage/http-cache"><span>HTTP Cache</span></a></li><li><a href="/javascript-guidebook//browser-object-model/offline-and-storage/cookie"><span>Cookie</span></a></li><li><a href="/javascript-guidebook//browser-object-model/offline-and-storage/web-storage"><span>Web Storage</span></a></li><li><a href="/javascript-guidebook//browser-object-model/offline-and-storage/web-workers"><span>Web Workers</span></a></li><li><a href="/javascript-guidebook//browser-object-model/offline-and-storage/service-worker"><span>Service Worker</span></a></li><li><a href="/javascript-guidebook//browser-object-model/offline-and-storage/indexed-db"><span>IndexedDB</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/performance">性能 API</a><ul><li><a href="/javascript-guidebook//browser-object-model/performance/performance"><span>Performance API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/performance/performance-resource-timing"><span>Performance Resource Timing API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/performance/performance-navigation-timing"><span>Performance Navifation API</span></a></li><li><a href="/javascript-guidebook//browser-object-model/performance/perfromance-timeline"><span>性能时间线</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/multimedia">多媒体 API</a><ul><li><a href="/javascript-guidebook//browser-object-model/multimedia/audio"><span>音频</span></a></li><li><a href="/javascript-guidebook//browser-object-model/multimedia/video"><span>视频</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/device">设备 API</a><ul><li><a href="/javascript-guidebook//browser-object-model/device/geolocation"><span>地理定位</span></a></li><li><a href="/javascript-guidebook//browser-object-model/device/touch-event"><span>触控事件</span></a></li><li><a href="/javascript-guidebook//browser-object-model/device/camera"><span>摄像头访问</span></a></li><li><a href="/javascript-guidebook//browser-object-model/device/the-position-object"><span>Position 对象</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/integration">集成 API</a><ul><li><a href="/javascript-guidebook//browser-object-model/integration/full-screen"><span>全屏 API</span></a></li></ul></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle">浏览器工作原理</a><ul><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/browser-architecture"><span>浏览器架构</span></a></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/workflow"><span>渲染进程的内部机制</span></a></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/construction-of-the-object-model"><span>构建对象模型</span></a></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/script-loading-asynchronously"><span>脚本异步加载</span></a></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/construction-of-render-tree"><span>渲染树构建</span></a></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/layout"><span>布局</span></a></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/paint"><span>绘制</span></a></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/composite"><span>合并</span></a></li><li><a href="/javascript-guidebook//browser-object-model/browser-working-principle/browser-event"><span>浏览器事件处理</span></a></li></ul></li><li><a aria-current="page" class="active" href="/javascript-guidebook//browser-object-model/wireless-development">移动开发</a><ul><li><a href="/javascript-guidebook//browser-object-model/wireless-development/mobile-web-development"><span>移动 Web</span></a></li><li><a aria-current="page" class="active" href="/javascript-guidebook//browser-object-model/wireless-development/viewport"><span>视口</span></a></li><li><a href="/javascript-guidebook//browser-object-model/wireless-development/adaptation"><span>适配方案</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="视口" data-depth="2" class=""><a href="/javascript-guidebook//browser-object-model/wireless-development/viewport#视口"><span>视口</span></a></li><li title="屏幕" data-depth="3" class=""><a href="/javascript-guidebook//browser-object-model/wireless-development/viewport#屏幕"><span>屏幕</span></a></li><li title="视口" data-depth="3" class=""><a href="/javascript-guidebook//browser-object-model/wireless-development/viewport#视口-1"><span>视口</span></a></li><li title="概念关系图" data-depth="3" class=""><a href="/javascript-guidebook//browser-object-model/wireless-development/viewport#概念关系图"><span>概念关系图</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h2 id="视口"><a aria-hidden="true" href="#视口"><span class="icon icon-link"></span></a>视口</h2><h3 id="屏幕"><a aria-hidden="true" href="#屏幕"><span class="icon icon-link"></span></a>屏幕</h3><h4 id="屏幕尺寸"><a aria-hidden="true" href="#屏幕尺寸"><span class="icon icon-link"></span></a>屏幕尺寸</h4><p>设备屏幕尺寸是指屏幕的<strong>对角线长度</strong>。比如：iPhone6/7 是 4.7 寸，iPhone6/7p 是 5.5 寸。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="1英寸 = 2.54厘米
3.5in = 3.5*2.54cm = 8.89cm
4.0in = 4.0*2.54cm = 10.16cm
4.8in = 4.8*2.54cm = 12.192cm
5.0in = 5.0*2.54cm = 12.7cm
5.5in = 5.5*2.54cm = 13.97cm
6.0in = 6.0*2.54cm = 15.24cm
" data-status="copy"></button><div class="token-line"><span class="token plain">1英寸 = 2.54厘米</span></div><div class="token-line"><span class="token plain">3.5in = 3.5*2.54cm = 8.89cm</span></div><div class="token-line"><span class="token plain">4.0in = 4.0*2.54cm = 10.16cm</span></div><div class="token-line"><span class="token plain">4.8in = 4.8*2.54cm = 12.192cm</span></div><div class="token-line"><span class="token plain">5.0in = 5.0*2.54cm = 12.7cm</span></div><div class="token-line"><span class="token plain">5.5in = 5.5*2.54cm = 13.97cm</span></div><div class="token-line"><span class="token plain">6.0in = 6.0*2.54cm = 15.24cm</span></div><div class="token-line"><span class="token plain"></span></div></pre></div></div><img alt="MobileDemension" src="/javascript-guidebook/static/mobile-demension.59c7f528.jpg" width="800"/><div class="markdown"><h4 id="像素"><a aria-hidden="true" href="#像素"><span class="icon icon-link"></span></a>像素</h4><p>像素是计算机屏幕能显示一种特定颜色的最小区域。</p><p>在移动 Web 应用中，像素分为设备像素和逻辑像素（也称为 CSS 像素）。</p><h5 id="设备像素"><a aria-hidden="true" href="#设备像素"><span class="icon icon-link"></span></a>设备像素</h5><p>设备像素是物理概念，指的是设备中使用的物理像素，也就是屏幕中的发光的点数（屏幕由很多个发光点组成，每个发光点可以显示不同的颜色，这些发光的点组成了屏幕）。</p><p>比如 iPhone 5 的分辨率 <code>640x1136px</code>。横向有 640 个发光的点，纵向有 1136 个发光的点。所以我们说 iPhone5 的设备水平像素是 640 像素，指的是 640 个发光点。</p><h5 id="逻辑像素"><a aria-hidden="true" href="#逻辑像素"><span class="icon icon-link"></span></a>逻辑像素</h5><p>逻辑像素是 Web 编程的概念，CSS 样式代码中使用的正是逻辑像素。1 个逻辑像素可能对应多个物理像素（设备发光点）。</p><p>在 CSS 规范中，长度单位可以分为两类，绝对（absolute）单位以及相对（relative）单位。<code>px</code> 是一个相对单位，相对的是设备像素（Device Pixel）。</p><p>在 Apple 的视网膜屏（Retina）中，每 4 个（设备）像素为一组，渲染出普通屏幕中一个像素显示区域内的图像，从而实现更为精细的显示效果。此时， 250px 的（逻辑像素的）元素跨越了 500 个物理像素的宽度。</p></div><img alt="Retina逻辑像素" src="/javascript-guidebook/static/retina-logical-pixel.96c1102f.png" width="800"/><div class="markdown"><p>浅显的理解就是可以看作是 <code>2cmx2cm</code> 的正方形被切割成四块，然后遇到 dpr 为 2 的时候，被切割的四块又被分别切割成四块，但是总面积不变。</p><p>如果用户进行了放大，那么一个 CSS 像素还将跨越更多的物理像素。</p><h5 id="设备的独立像素"><a aria-hidden="true" href="#设备的独立像素"><span class="icon icon-link"></span></a>设备的独立像素</h5><p>设备独立像素（DIP，Device Independent Pixel，Density Independent Pixel），简单地来说设备独立像素就是：独立于设备的用于逻辑上衡量像素的单位。<strong>在移动 Web 开发中就是指的 CSS 的逻辑像素</strong>。</p><h4 id="分辨率"><a aria-hidden="true" href="#分辨率"><span class="icon icon-link"></span></a>分辨率</h4><p>屏幕分辨率（Resolution）是指：<strong>屏幕的像素点数</strong>。</p><ul><li>在 PC 端的分辨率常见是：<code>[ 1366*768, 1440*900, 1024*768, 1400*900,...]</code></li><li>移动端常见分辨率: <code>[2160*1080, 1920*1080, 1334*750, 1136*640...]</code></li></ul><p>在说分辨率的时候我们常常会把大的值说在前面，所以在 PC 端屏幕宽度比高度的值要大一点，第一个值一般是指的宽度，第二个值为高度。</p><p>移动端正好相反，手机一般宽度都是小于高度，所以第一个值是宽度。</p><p>补充几个概念：</p><ul><li><p>Full HD（全高清）：<code>1920*1080</code> 分辨率，iPhone7p 就是这个。</p></li><li><p>4K 屏：也叫 QHD 或 UHD（超高清），最小分辨率是 <code>3840*2160</code>，电视用得多</p></li><li><p>设备相机的像素：</p><ul><li><p><code>640*480</code> = 307200 = 30 万像素</p></li><li><p><code>1600*1200</code> = 1920000 = 200 万像素</p></li><li><p><code>3264*2488</code> = 8120832 = 800 万像素</p></li><li><p><code>4536*3024</code> = 13716864 = 1400 万像素</p></li></ul></li></ul><h4 id="设备像素密度"><a aria-hidden="true" href="#设备像素密度"><span class="icon icon-link"></span></a>设备像素密度</h4><p>PPI（Pixels Per Inch）表示每英寸所拥有的像素数目，即像素密度（Screen Density）。</p><p>一般的计算方法或者公式： <strong>PPI = 对角线分辨率 / 屏幕尺寸（英寸）</strong></p><p>屏幕对角线的分辨率也就是屏幕对角线上的像素点数，可以根据已知的横纵分辨率通过勾股定理计算得。</p><p><a href="https://www.zhihu.com/question/23770739" target="_blank" rel="noopener noreferrer">DPI 和 PPI 的区别是什么?<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>DPI 通常用于打印机，而 PPI 多用于显示器。</p><h4 id="设备像素比"><a aria-hidden="true" href="#设备像素比"><span class="icon icon-link"></span></a>设备像素比</h4><p>设备像素比是默认缩放为 100%的情况下，物理像素和 CSS 像素的比值。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="DPR = 物理像素数 / 逻辑像素数
" data-status="copy"></button><div class="token-line"><span class="token plain">DPR = 物理像素数 / 逻辑像素数</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><blockquote><p>MacBook Pro 视网膜屏（Retina）显示器硬件像素是 <code>2880px *1800px</code>。当设置屏幕分辨率为 <code>1920px * 1200px</code> 的时候，理想视口的宽度值是 1920px， 那么 DIP 的宽度值就是 1920px。其与理想视口宽度的比值为 1.5（2880/1920），这个比值叫做设备像素比。</p></blockquote><p>设备像素比可以通过 <code>window.devicePixelRatio</code> 来获取，或者使用 CSS 中的 <code>device-pixel-ratio</code>。</p><p>设备像素比不一定都是整数，尤其是 Android 设备十分的碎片化。</p><p>下面常见的设备像素比：</p><ul><li>普通密度桌面显示屏：<code>devicePixelRatio = 1</code></li><li>高密度桌面显示屏（Retina）：<code>devicPixelRatio = 2</code></li><li>主流手机显示屏：<code>devicePixelRatio = 2 or 3</code></li></ul><p>对于一张 <code>100px*100px</code> 的图片，通过 CSS 设置其宽高：</p><div class="__dumi-default-code-block"><pre class="prism-code language-css"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text=" {
  width: 100px;
  height: 100px;
}
" data-status="copy"></button><div class="token-line"><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">width</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">height</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">100</span><span class="token unit">px</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>在普通显示屏的电脑中打开是正常的，但假设在手机或 Retina 屏中打开，按照逻辑分辨率来渲染，他们的 <code>deviceRatio = 2</code>，那么就相当于拿 4 个物理像素来描绘 1 个电子像素。这等于拿一个 2 倍的放大镜去看图片，图片就会变得模糊。</p><p>这时，就需要使用 <code>@2x</code> 甚至 <code>@3x</code> 图来避免图片的失真。</p><p><strong>1px 的物理像素的解决方案</strong></p><p>从第一部分的讨论可知 viewport 的 <code>initial-scale</code> 具有缩放页面的效果。对于 dpr=2 的屏幕，1px 压缩一半便可与 1px 的设备像素比匹配，这就可以通过将缩放比 <code>initial-scale</code> 设置为 0.5=1/2 而实现。以此类推 dpr=3 的屏幕可以将 <code>initial-scale</code> 设置为 0.33=1/3 来实现。</p><h3 id="视口-1"><a aria-hidden="true" href="#视口-1"><span class="icon icon-link"></span></a>视口</h3><p>在 PC 端，视口指的是浏览器的可视区域，其宽度和浏览器窗口的度保持一致。在 CSS 标准文档中，视口也被称为初始包含块，它是所有 CSS 百分比宽度推算的根源，给 CSS 布局限制了一个最大宽度。</p><p>移动端浏览器通常宽度是 <code>240px~640px</code>，而大多数为 PC 端设计的网站宽度至少为 800px，如果仍以浏览器窗口作为视口的话，网站内容在手机上看起来会非常窄。</p><p>因此，移动端引入三个概念，使得移动端中的视口与浏览器宽度不再相关联。</p><ul><li>布局视口 Layout Viewport</li><li>视觉视口 Visual Viewport</li><li>理想视口 Ideal Viewpor</li></ul><h4 id="布局视口"><a aria-hidden="true" href="#布局视口"><span class="icon icon-link"></span></a>布局视口</h4><p>一般移动设备的浏览器都默认设置了一个 <code>&lt;viewport&gt;</code> 元标签，定义一个虚拟的布局视口（Layout Viewport），用于解决早期的页面在手机上显示的问题。iOS 和 Android 基本都将这个视口分辨率设置为 980px，所以 PC 上的网页基本能在手机上呈现，只不过元素看上去很小，一般默认可以手动缩放网页。</p></div><img alt="布局视口" src="/javascript-guidebook/static/layout-viewport.a6b0fadd.jpg" width="800"/><div class="markdown"><p>布局视口的宽度 / 高度可以通过 <code>document.documentElement.clientWidth/clientHeight</code> 获取。</p><p>可以看到，默认的布局视口宽度为 980px。如果要显式设置布局视口，可以使用 HTML 中的 <code>&lt;meta&gt;</code> 标签：</p><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="&lt;meta name=&quot;viewport&quot; content=&quot;width=400&quot; /&gt;
" data-status="copy"></button><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">meta</span><span class="token tag"> </span><span class="token tag attr-name">name</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">viewport</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag attr-name">content</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">width=400</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>布局视口使视口与移动端浏览器屏幕宽度完全独立开。CSS 布局将会根据它来进行计算，并被它约束。</p><p>我们可以使用视口标签（Viewport <code>&lt;meta&gt;</code> 标签）来显式地设置布局视口。</p><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="&lt;meta
  name=&quot;viewport&quot;
  content=&quot;width=device-width,initial-scale=0,maximum-scale=1,user-scalable=no&quot;
/&gt;
" data-status="copy"></button><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">meta</span><span class="token tag"></span></div><div class="token-line"><span class="token tag">  </span><span class="token tag attr-name">name</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">viewport</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"></span></div><div class="token-line"><span class="token tag">  </span><span class="token tag attr-name">content</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">width=device-width,initial-scale=0,maximum-scale=1,user-scalable=no</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"></span></div><div class="token-line"><span class="token tag"></span><span class="token tag punctuation">/&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>下面是每个属性的详细说明：</p><table><thead><tr><th>属性名</th><th>取值</th><th>描述</th></tr></thead><tbody><tr><td>width</td><td>正整数或 <code>device-width</code></td><td>定义视口的宽度，单位为像素</td></tr><tr><td>height</td><td>正整数或 <code>device-height</code></td><td>定义视口的高度，单位为像素，一般不用</td></tr><tr><td>initial-scale</td><td>[0.0-10.0]</td><td>定义初始缩放值</td></tr><tr><td>minimum-scale</td><td>[0.0-10.0]</td><td>定义放大最大比例，它必须小于或等于 <code>maximum-scale</code> 设置</td></tr><tr><td>maximum-scale</td><td>[0.0-10.0]</td><td>定义缩小最小比例，它必须大于或等于 <code>minimum-scale</code> 设置</td></tr><tr><td>user-scalable</td><td>yes / no</td><td>定义是否允许用户缩放页面，默认 yes</td></tr></tbody></table><p>有几点值得注意：</p><ul><li><code>&lt;viewport&gt;</code> 标签只对移动端浏览器有效，对 PC 端浏览器无效</li><li>当缩放比例为 100%时，<code>dip 的宽度 = CSS像素宽度 = 理想视口的宽度 = 布局视口的宽度</code></li><li>单独设置 <code>initial-scale</code> 或 <code>width</code> 都会有兼容性问题，所以设置布局视口为理想视口的最佳方法是同时设置这两个属性</li><li>即使设置了 <code>user-scalable = no</code>，在 Android Chrome 浏览器中也可以强制启用手动缩放</li></ul><p>如果 <code>布局视口的宽度 = device-width</code>（设备宽度，也就是：<code>物理像素/dpr</code>）时，此时页面 100%的宽度正好能在视觉视口中完全显示，不需要缩放查看页面了，而且在不同尺寸下都能基本表现一致，此时的布局视口的状态我们就称为<strong>理想视口（Ideal Viewport）</strong>。</p><h4 id="视觉视口"><a aria-hidden="true" href="#视觉视口"><span class="icon icon-link"></span></a>视觉视口</h4><p>视觉视口是用户当前看到的区域，用户可以通过缩放操作视觉视口，同时不会影响布局视口。</p></div><img alt="Webpack执行流程" src="/javascript-guidebook/static/vision-viewport.8f33ec57.jpg" width="800"/><div class="markdown"><p>视觉视口和缩放比例的关系为：<code>当前缩放值 = 理想视口宽度 / 视觉视口宽度</code></p><p>所以，当用户放大时，视觉视口将会变小，CSS 像素将跨越更多的物理像素。</p><h4 id="理想视口"><a aria-hidden="true" href="#理想视口"><span class="icon icon-link"></span></a>理想视口</h4><p>布局视口的默认宽度并不是一个理想的宽度，于是 Apple 和其他浏览器厂商引入了理想视口的概念，它对设备而言是最理想的布局视口尺寸。显示在理想视口中的网站具有最理想的宽度，用户无需进行缩放。</p><p>理想视口的值其实就是屏幕分辨率的值，它对应的像素叫做设备逻辑像素（Device Independent Pixel，DIP）。DIP 和设备的物理像素无关，一个 DIP 在任意像素密度的设备屏幕上都占据相同的空间。如果用户没有进行缩放，那么一个 CSS 像素就等于一个 DIP。</p><p>理想视口的宽度一般可以通过以下公式计算： <code>理想视口的宽度 = 设备像素 / dpr</code></p><p>也就是当<strong>布局视口的宽度</strong>等于<strong>设备独立像素的宽度</strong>时就是理想视口。</p><p>用下面的方法可以使布局视口与理想视口的宽度一致：</p><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="&lt;!-- 这行代码告诉浏览器,布局视口的宽度应该与理想视口的宽度一致 --&gt;
&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot; /&gt;
" data-status="copy"></button><div class="token-line"><span class="token comment">&lt;!-- 这行代码告诉浏览器,布局视口的宽度应该与理想视口的宽度一致 --&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;</span><span class="token tag">meta</span><span class="token tag"> </span><span class="token tag attr-name">name</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">viewport</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag attr-name">content</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">width=device-width</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>实际上，这就是响应式布局的基础。</p><h4 id="实际应用"><a aria-hidden="true" href="#实际应用"><span class="icon icon-link"></span></a>实际应用</h4><p>以下是通过改变 meta viewport 的几个参数的值来算取不同的 viewport：</p><table><thead><tr><th>width</th><th>initial-scale</th><th>layout viewport</th><th>visual viewport</th><th>ideal viewport</th><th>是否滚动</th></tr></thead><tbody><tr><td>-</td><td>-</td><td>980px</td><td>980px</td><td>375px</td><td>no</td></tr><tr><td>device-width</td><td>1</td><td>375px</td><td>375px</td><td>375px</td><td>no</td></tr><tr><td>device-width</td><td>2</td><td>375px</td><td>188px</td><td>375px</td><td>yes</td></tr><tr><td>device-width</td><td>0.5</td><td>750px</td><td>750px</td><td>375px</td><td>no</td></tr><tr><td>480px</td><td>1</td><td>480px</td><td>375px</td><td>375px</td><td>yes</td></tr><tr><td>480px</td><td>2</td><td>480px</td><td>188px</td><td>375px</td><td>yes</td></tr><tr><td>480px</td><td>0.5</td><td>750px</td><td>750px</td><td>375px</td><td>no</td></tr></tbody></table><p>以上是针对 iPhone 6/7/8 的测试数据，且无论怎么设置 Viewport 都具有临界值，即：<code>75 &lt;= layoutviewport &lt;= 10000</code>，<code>75 &lt;= visualviewport &lt;= 1500</code>。</p><p><strong>为什么要设置 Viewport？</strong></p><p>viewport 的设置不会对 PC 页面产生影响，但对于移动页面却很重要。下面我们举例来说明：</p><ol><li>媒体查询 <code>@media</code> 响应式布局中，会根据媒体查询功能来适配多端布局，必须对 viewport 进行设置，否则根据查询到的尺寸无法正确匹配视觉宽度而导致布局混乱。如不设置 viewport 参数，多说移动端媒体查询的结果将是 980px 这个节点布局的参数，而非我们通常设置的 768px 范围内的这个布局参数</li><li>由于目前多数手机的 DPR 都不再是 1，为了产出高保真页面，我们一般会给出 750px 的设计稿，那么就需要通过设置 viewport 的参数来进行整体换算，而不是在每次设置尺寸时进行长度的换算。</li></ol><h3 id="概念关系图"><a aria-hidden="true" href="#概念关系图"><span class="icon icon-link"></span></a>概念关系图</h3><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="屏幕尺寸、屏幕分辨率 ==&gt; 对角线分辨率/屏幕尺寸 ==&gt; 屏幕像素密度PPI
                                                 |
                  设备像素比dpr = 物理像素 / 设备独立像素dip(dp)
                                                 |
                                           viewport: scale
                                                 |
                                              CSS像素px
" data-status="copy"></button><div class="token-line"><span class="token plain">屏幕尺寸、屏幕分辨率 ==&gt; 对角线分辨率/屏幕尺寸 ==&gt; 屏幕像素密度PPI</span></div><div class="token-line"><span class="token plain">                                                 |</span></div><div class="token-line"><span class="token plain">                  设备像素比dpr = 物理像素 / 设备独立像素dip(dp)</span></div><div class="token-line"><span class="token plain">                                                 |</span></div><div class="token-line"><span class="token plain">                                           viewport: scale</span></div><div class="token-line"><span class="token plain">                                                 |</span></div><div class="token-line"><span class="token plain">                                              CSS像素px</span></div><div class="token-line"><span class="token plain"></span></div></pre></div><hr/><p>参考资料：</p><ul><li><a href="https://www.cnblogs.com/2050/p/3877280.html" target="_blank" rel="noopener noreferrer">移动前端开发之 Viewport 的深入理解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://juejin.im/post/5c0dd7ac6fb9a049c43d7edc" target="_blank" rel="noopener noreferrer">移动端适配总结<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/javascript-guidebook/edit/master/docs/browser-object-model/wireless-development/viewport.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">9/8/2020, 2:03:02 PM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/javascript-guidebook/umi.js"></script>
    <script src="/javascript-guidebook/docs__browser-object-model__wireless-development__viewport.md.js"></script>
  </body>
</html>
